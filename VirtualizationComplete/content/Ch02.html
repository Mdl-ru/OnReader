<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:exsl="http://exslt.org/common" xmlns:ng="http://docbook.org/docbook-ng" xmlns:fb="http://ogp.me/ns/fb#">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet"/>
<title>Книга 2. pfSense - Полная виртуализация. Базовая коммерческая редакция: Proxmox-freeNAS-Zentyal-pfSense</title>
<meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"/>
<meta name="mavenGroupId" content="www.mdl.ru"/>
<meta name="mavenArtifactId" content="VirtualizationComplete"/>
<meta name="mavenVersionId" content="1.0.0"/>
<link rel="home" href="index.html" title="Полная виртуализация. Базовая коммерческая редакция: Proxmox-freeNAS-Zentyal-pfSense"/>
<link rel="up" href="index.html" title="Полная виртуализация. Базовая коммерческая редакция: Proxmox-freeNAS-Zentyal-pfSense"/>
<link rel="prev" href="Ch01.html" title="Книга 1. Proxmox VE"/>
<link rel="next" href="Ch03.html" title="Книга 3. freeNAS"/>
<meta name="git-sha" content=""/>
<meta name="buildTime" content=""/>
<script type="text/javascript">
            //The id for tree cookie
            var treeCookieId = "virtualization-complete";
            var language = "en";
            var w = new Object();
            //Localization
            txt_filesfound = 'Results';
            txt_enter_at_least_1_char = "You must enter at least one character.";
            txt_browser_not_supported = "Please enable JavaScript.";
            txt_please_wait = "Please wait. Search in progress...";
            txt_results_for = "Results for: ";
</script>
<style type="text/css">
            input {
            margin-bottom: 5px;
            margin-top: 2px;
            }

            .folder {
            display: block;
            height: 22px;
            padding-left: 20px;
            background: transparent url(../common/jquery/treeview/images/folder.gif) 0 0px no-repeat;
            }
</style>
<link rel="shortcut icon" href="../MdlLogo.gif" type="image/gif"/>
<link rel="stylesheet" type="text/css" href="../common/css/positioning.css"/>
<link rel="stylesheet" type="text/css" href="../common/css/custom.css"/>
<link rel="canonical" href="http://onreader.mdl.ru/VirtualizationComplete/content/index.html"/>
<!--[if IE]>
	<link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
<![endif]-->
<link rel="stylesheet" type="text/css" href="../common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css"/>
<link rel="stylesheet" type="text/css" href="../common/jquery/treeview/jquery.treeview.css"/>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.0.min.js"><!----></script>
<script type="text/javascript" src="../common/jquery/jquery-ui-1.8.2.custom.min.js"><!----></script>
<script type="text/javascript" src="../common/jquery/jquery.cookie.js"><!----></script>
<script type="text/javascript" src="../common/jquery/treeview/jquery.treeview.min.js"><!----></script>
<link rel="stylesheet" type="text/css" href="http://cdn.jsdelivr.net/qtip2/2.2.0/jquery.qtip.min.css"/>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/qtip2/2.2.0/jquery.qtip.min.js">
<!--jQuery plugin for glossary popups. --></script><script type="text/javascript" src="search/htmlFileList.js"><!----></script>
<script type="text/javascript" src="search/htmlFileInfoList.js"><!----></script>
<script type="text/javascript" src="search/nwSearchFnt.js"><!----></script>
<script type="text/javascript" src="search/stemmers/en_stemmer.js">
<!--//make this scalable to other languages as well.--></script>
<script type="text/javascript" src="search/index-1.js"><!----></script>
<script type="text/javascript" src="search/index-2.js"><!----></script>
<script type="text/javascript" src="search/index-3.js"><!----></script>
<script type="text/javascript">
	    var _gaq = _gaq || [];
	    _gaq.push(['_setAccount', 'UA-17511903-1']);
	    
	    _gaq.push(['_setDomainName', '.openstack.org']);	        
</script>
<script type="text/javascript" src="../common/ga.js"><!----></script>
<script language="javascript" src="/js/common.js"></script>
<link rel="stylesheet" href="../common/css/googlecode.css">
<script src="../common/highlight.pack.js"></script>
</head>
<body>
<!----><script type="text/javascript"><!--
hljs.initHighlightingOnLoad();
HeaderName = 'Книга 2. pfSense';
PrevRef = 'Ch01.html';
UpRef = 'index.html';
NextRef = 'Ch03.html';//-->
</script>
<!----><script type="text/javascript" src="HeaderAndToolbar.js">
</script><script type="text/javascript"><!--
document.write(HeaderAndToolbar); //-->
</script>
<div id="content">
 <div class="part">
  <div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title">
   Книга 2. pfSense</h1>
  </div></div></div>

  <div class="toc"><p><strong>Содержание</strong></p>
   <dl>
   <dt><span class="chapter"><a href="Ch02.html">Книга 2. pfSense</a></span></dt>
   <dd><dl>
    <dt><span class="section"><a href="Ch02.html#0201">2.1 Введение в pfSense</a></span></dt>
    <dt><span class="section"><a href="Ch02.html#0202">2.2 Установка pfSense</a></span></dt>
    <dt><span class="section"><a href="Ch02.html#0203">2.3 Назначение сетевых интерфейсов</a></span></dt>
    <dt><span class="section"><a href="Ch02.html#0204">2.4 Назначение IP адресов</a></span></dt>
    <dt><span class="section"><a href="Ch02.html#0205">2.5 Сброс пароля администратора</a></span></dt>
    <dt><span class="section"><a href="Ch02.html#0206">2.6 Мастер веб- настройки</a></span></dt>
    <dt><span class="section"><a href="Ch02.html#0207">2.7 Смена тем</a></span></dt>
    <dt><span class="section"><a href="Ch02.html#0208">2.8 Настройка сервера DHCP</a></span></dt>
     <dd><dl>
      <dt><span class="section"><a href="Ch02.html#020801">2.8.1 WINS, DNS, шлюз и домен</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#020802">2.8.2 Резервирование клиента DHCP</a></span></dt>
     </dl></dd>
    <dt><span class="section"><a href="Ch02.html#0209">2.9 Настройки межсетевого экрана</a></span></dt>
     <dd><dl>
      <dt><span class="section"><a href="Ch02.html#020901">2.9.1 Правила LAN</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#020902">2.9.2 Правила WAN</a></span></dt>
     </dl></dd>
    <dt><span class="section"><a href="Ch02.html#0210">2.10 OpenVPN</a></span></dt>
     <dd><dl>
      <dt><span class="section"><a href="Ch02.html#021001">2.10.1 Утилита экспорта клиента OpenVPN</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#021002">2.10.2 Мастер настройки OpenVPN</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#021003">2.10.3 Соединения клиента OpenVPN</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#021004">2.10.4 Аутентификация пользователей домена Zentyal</a></span></dt>
     </dl></dd>
    <dt><span class="section"><a href="Ch02.html#0211">2.11 Snort IDS</a></span></dt>
     <dd><dl>
      <dt><span class="section"><a href="Ch02.html#021101">2.11.1 Установка пакета Snort</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#021102">2.11.2 Глобальные настройки Snort</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#021103">2.11.3 Интерфейсы Snort</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#021104">2.11.4 Обновление правил угроз</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#021105">2.11.5 Категории правил угроз</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#021106">2.11.6 Добавление оповещений в список блокировок</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#021107">2.11.7 Блокировка источника нарушения правил</a></span></dt>
     </dl></dd>
    <dt><span class="section"><a href="Ch02.html#0212">2.12 Резервные копии настроек</a></span></dt>
   </dl></dd>
   </dl>
  </div>
  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0201"> </a>2.1 Введение в pfSense</h3>
   </div></div></div>
   <p>Примерно через год после размещения Proxmox в промышленной эксплуатации я получил запрос. Мне сказали, что один клиент решил изменить 
   шифрование в нашем VPN туннеле на сто- то более безопасное. Вскоре я понял, что наше существующее оборудование НЕ может быть 
   обновлено, следовательно, я начал искать альтернативы. Вот тогда я и сделал выбор в пользу pfSense!</p>
   <p>Моя первая установка была выполнена на голое железо и работала просто прекрасно. Это произошло незадолго до того, как я начал обдумывать 
   идею виртуальной платформы маршрутизации. Проходили большие дискуссии смогут ли виртуальные маршрутизаторы справиться с этой задачей с 
   точки зрения безопасности. Я просто не мог допустить такую идею основы, пока я не опробовал её. Теперь, по прошествии 7 лет, я должен 
   сказать, что я рад, что решил виртуализировать всё.</p>
   <p>Вопрос безопасности подвергся вскоре испытанию после того как мы пережили ряд проблем с шлюзом ATT. В конечном итоге я провёл весь 
   день на телефоне с ATT начав с 1 уровня и в конечном итоге выполнив это на ВЕРХНЕМ 6 уровне поддержки. Это то место, где инженеры сетевой 
   среды проводят свои дни! Чтобы сократить длинную историю, <span class="emphasis"><em>сетевые инженеры ATT НЕ смогли проверить мои 
   шлюзы без запрета pfSense/</em></span></p>
   <p>На протяжении многих лет работы <span class="term"><strong class="userinput">Snort IDS</strong></span> в pfSense отловил множество 
   злоумышленников и <span class="term"><strong class="userinput">незамедлительно уничтожил эти</strong></span>. При каждой установке 
   нового программного обеспечения, этот пакет обнюхивался <span class="term"><strong class="userinput">WireShark</strong></span> перед его 
   запуском в промышленную среду! Более того, мониторы сетевых служб, наподобие <span class="term"><strong class="userinput">Nagios 
   Core</strong></span> предоставили богатую информацию для поддержки ИТ администраторов в информированном состоянии. При 
   <span class="emphasis"><em>верных правилах межсетевого экрана</em></span> и <span class="emphasis"><em>аппаратной фильтрации 
   2 уровня</em></span> <span class="term"><strong class="userinput">ОЧЕНЬ</strong></span> маловероятно, 
   что вас взломают!</p>
      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
	   <table border="0" summary="Замечание"><tr><td rowspan="2" align="center" valign="top" width="25"><a id="DockerBooleanFlags"> </a>
	   <img alt="[Замечание]" src="../common/images/admon/note.png"/></td><th align="left">Замечание</th></tr><tr><td align="left" valign="top">
	   <p>pfSense это мощная платформа и её набор функциональностей невозможно полностью охватить в данной книге. Данное руководство было 
	   разработано как пошаговое для того, чтобы вы быстро всё подняли и запустили. Я настоятельно рекомендую использовать богатые ресурсы в сети 
	   для более глубокого понимания!.</p></td></tr></table>
     </div>
   <p>OK! Сказано достаточно! Прежде чем начать установку, вы должны <span class="emphasis"><em>создать настройку ВМ</em></span>. Я рекомендую 
    <span class="emphasis"><em>виртуальный диск 8ГБ IDE</em></span> и  <span class="emphasis"><em>4ГБ оперативной памяти</em></span> для 
	такой установки. Если вам нужно повторить эти шаги, вернитесь сюда:
	<a class="link" href="http://onreader.mdl.ru/VirtualizationComplete/content/Ch01.html#0109" target="_top">1.9 Создание настроек 
	ВМ</a>.</p>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0202"> </a>2.2 Установка pfSense</h3>
   </div></div></div>
   <p>Теперь включите свою ВМ pfSense, убедившись что у вас имеется CD или загруженный образ диска. Вы должны увидеть следующий экран:</p>
	<div class="figure"><a id="Fig0201"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0201.jpg" width="452" height="263"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Теперь, когда вы получили приглашение (отображённое ниже), <span class="term"><strong class="userinput">нажмите клавишу I</strong></span>. 
   Если вы не поймали её вовремя, просто сбросьте вашу ВМ.</p>
	<div class="figure"><a id="Fig0202"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0202.jpg" width="457" height="266"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Далее вы увидите консоль настройки (изображённую ниже). Используйте свою клавишу вниз чтобы достичь <span class="term"><strong class="userinput">Accept 
   These Settings</strong></span> с последующим нажатием <span class="term"><strong class="userinput">Enter</strong></span>.</p>
	<div class="figure"><a id="Fig0203"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0203.jpg" width="452" height="264"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Теперь выберите <span class="term"><strong class="userinput">Quick/Easy Install</strong></span> (как изображено ниже)</p>
	<div class="figure"><a id="Fig0204"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0204.jpg" width="453" height="263"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Нажмите <span class="term"><strong class="userinput">OK</strong></span> (как изображено ниже)</p>
	<div class="figure"><a id="Fig0205"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0205.jpg" width="452" height="263"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Вы хотите выбрать <span class="term"><strong class="userinput">Standard Kernel </strong></span> (как изображено ниже) для нашей установки.</p>
	<div class="figure"><a id="Fig0206"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0206.jpg" width="452" height="264"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Далее выберите <span class="term"><strong class="userinput">Reboot</strong></span> (как изображено ниже)</p>
	<div class="figure"><a id="Fig0207"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0207.jpg" width="450" height="261"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>После перезагрузки системы вы будете проинформированы, что полномочия <span class="term"><strong class="userinput">ПО УМОЛЧАНИЮ</strong></span> 
   установлены в значение:</p>
   <p>Пользователь: <span class="term"><strong class="userinput">admin</strong></span></p>
   <p>Пароль: <span class="term"><strong class="userinput">pfsense</strong></span></p>
	<div class="figure"><a id="Fig0208"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0208.jpg" width="453" height="262"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0203"> </a>2.3 Назначение сетевых интерфейсов</h3>
   </div></div></div>
   <p>Далее вам нужно настроить сетевую среду! Поскольку pfSense является дистрибутивом на основе <span class="term"><strong 
   class="userinput">BSD</strong></span>, ваши сетевые интерфейсы <span class="emphasis"><em>именуются по- другому</em></span>. 
   Если вы применяете <strong class="userinput">e1000 Gigabit</strong></span>, они должны отображаться как 
   <span class="term"><strong class="userinput"><code>em(x)</code></strong></span>. Если вы используете 
   <strong class="userinput">Realtek</strong></span>, они будут именоваться как <span class="term"><strong 
   class="userinput"><code>re(x)</code></strong></span>. <span class="emphasis"><em>Пожалуйста, сосредоточьте своё внимание сейчас!</em></span>
   Это единственная мудрёная часть установки!</p>
   <p><strong class="userinput">Отметим</strong></span> на рисунке ниже, что для <span class="term"><strong class="userinput"><code>em1</code></strong></span>
   был <strong class="userinput">назначен</strong></span> <strong class="userinput">IP адрес</strong></span>
   и он был выбран интерфейсом <strong class="userinput">LAN</strong></span> по умолчанию. Это НЕ правильно!
   <strong class="userinput">ЕДИНСТВЕННЫЙ</strong></span> возможный способ, которым <strong class="userinput">DHCP</strong></span>
   адрес может быть назначен, заключается в том, чтобы <span class="emphasis"><em>em1 интерфейс (как изображено ниже) был на 
   самом деле подключён к маршрутизатору интернет</em></span>. Мы должны перебросить эти интерфейсы так, чтобы 
   <strong class="userinput">LAN</strong></span>-ом стал <span class="term"><strong class="userinput"><code>em0</code></strong></span>.</p>
      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
	   <table border="0" summary="Замечание"><tr><td rowspan="2" align="center" valign="top" width="25"><a id="DockerBooleanFlags"> </a>
	   <img alt="[Замечание]" src="../common/images/admon/note.png"/></td><th align="left">Замечание</th></tr><tr><td align="left" valign="top">
	   <p>Я обнаружил, что проще всего <strong class="userinput">ВСЕГДА</strong></span> устанавливать 
	   <strong class="userinput">LAN</strong></span> на первый интерфейс, который 
	   <strong class="userinput">ВСЕГДА</strong></span> должен быть 
	   <span class="term"><strong class="userinput"><code>em0</code></strong></span> или
	   <span class="term"><strong class="userinput"><code>re0</code></strong></span>.</p></td></tr></table>
     </div>
   <p>Чтобы назначить <span class="term"><strong class="userinput"><code>em0</code></strong></span> на 
   <strong class="userinput">LAN</strong></span> выберите параметр <strong class="userinput">1</strong></span> и 
   нажмите <strong class="userinput">ENTER</strong></span>.</p>
	<div class="figure"><a id="Fig0209"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0209.jpg" width="455" height="262"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Вы увидите следующее приглашение (как на рисунке ниже). Нажмите <strong class="userinput">n</strong></span> для 
   <strong class="userinput">NO</strong></span>, затем нажмите <strong class="userinput">ENTER</strong></span>. Вам 
   <strong class="userinput">НЕ</strong></span> нужна <strong class="userinput">VLAN</strong></span>. Также отметим Mac адрес интерфейса. 
   Он должен соответствовать адресу в настройках ВМ Proxmox.</p>
	<div class="figure"><a id="Fig0210"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0210.jpg" width="452" height="263"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Далее мы будем приглашены для ввода имени WAN. Нажмите <span class="term"><strong class="userinput"><code>em1</code></strong></span>
   и затем <strong class="userinput">ENTER</strong></span>.</p>
	<div class="figure"><a id="Fig0211"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0211.jpg" width="451" height="262"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p><span class="term"><strong class="userinput"><code>pfSense</code></strong></span> теперь запросит имя интерфейса 
   <strong class="userinput">LAN</strong></span> (как изображено ниже). Введите <span class="term"><strong class="userinput"><code>em0</code></strong></span>,
   затем нажмите <strong class="userinput">ENTER</strong></span>.</p>
	<div class="figure"><a id="Fig0212"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0212.jpg" width="453" height="262"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Поскольку мы <strong class="userinput">НЕ</strong></span> настраиваем необязательный интерфейс (<span class="term"><strong 
   class="userinput"><code>opt1</code></strong></span>) прямо сейчас, нажмите клавишу <strong class="userinput">ENTER</strong></span>, что 
   означает NO SELECTION (как изображено ниже).</p>
	<div class="figure"><a id="Fig0213"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0213.jpg" width="452" height="263"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Ваши интерфейсы теперь будут назначены (как отображено ниже). Наберите <strong class="userinput">y</strong></span>, затем 
   нажмите <strong class="userinput">ENTER</strong></span>.</p>
	<div class="figure"><a id="Fig0214"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0214.jpg" width="453" height="263"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0204"> </a>2.4 Назначение IP адресов</h3>
   </div></div></div>
   <p>Теперь вам нужно установить IP адрес для адаптера <strong class="userinput">LAN</strong></span>. Это будет адрес, по которому будет 
   работать веб- интерфейс. Он также будет обслуживать <span class="emphasis"><em>шлюз по умолчанию</em></span> и 
   <span class="emphasis"><em>DNS сервер</em></span> вашей локальной сети.</p>
      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
	   <table border="0" summary="Замечание"><tr><td rowspan="2" align="center" valign="top" width="25"><a id="DockerBooleanFlags"> </a>
	   <img alt="[Замечание]" src="../common/images/admon/note.png"/></td><th align="left">Замечание</th></tr><tr><td align="left" valign="top">
	   <p>Я предпочитаю устанавливать этот адрес последним в подсети  
	   (<span class="term"><strong class="userinput"><code>x.x.x.254</code></strong></span>).</p></td></tr></table>
     </div>
   <p>Для продолжения выберите параметр <strong class="userinput">2</strong></span>, затем нажмите 
   <strong class="userinput">ENTER</strong></span>.</p>
	<div class="figure"><a id="Fig0215"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0215.jpg" width="454" height="262"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Далее наберите номер настраиваемого вами интерфейса. В нашем случае мы хотим использовать адаптер <strong class="userinput">LAN</strong></span>, 
   чей номер в списке 2 (как изображено ниже).</p>
   <p>Для продолжения наберите <strong class="userinput">2</strong></span>, затем нажмите 
	<div class="figure"><a id="Fig0216"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0216.jpg" width="454" height="262"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Теперь вы будете приглашены для нового IPv4 адреса <strong class="userinput">LAN</strong></span>. Для целей данного руководства я 
   использую <span class="term"><code>192.168.0.254</code></span> (как изображено ниже.)</p>
   <p>Для продолжения наберите используемый вами <strong class="userinput">IP LAN</strong></span>, затем нажмите 
   <strong class="userinput">ENTER</strong></span>.</p>
	<div class="figure"><a id="Fig0217"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0217.jpg" width="453" height="261"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Далее выбудете запрошены на предоставление количества битов <span class="emphasis"><em>маски подсети</em></span> в нотации 
   <strong class="userinput">CIDR.</strong></span> Это почти <strong class="userinput">ВСЕГДА</strong></span> будут 
   <strong class="userinput">24</strong></span> для локальной сети.</p>
   <p>Для продолжения наберите <strong class="userinput">24</strong></span>, затем нажмите 
   <strong class="userinput">ENTER</strong></span>.</p>
	<div class="figure"><a id="Fig0218"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0218.jpg" width="452" height="263"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Следующие несколько запросов могут быть пропущены нажатием <strong class="userinput">ENTER</strong></span>, что означает 
   <strong class="userinput">NO SELECTION</strong></span> (не выбрано, как изображено ниже).</p>
   <p>Для продолжения нажмите <strong class="userinput">ENTER</strong></span>.</p>
	<div class="figure"><a id="Fig0219"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0219.jpg" width="450" height="261"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Вам не нужно настраивать IPv6 (как изображено ниже) для вашей <strong class="userinput">LAN</strong></span>, поэтому данный шаг 
   может быть пропущен.</p>
   <p>Для продолжения нажмите <strong class="userinput">ENTER</strong></span>.</p>
	<div class="figure"><a id="Fig0220"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0220.jpg" width="453" height="262"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Чтобы настроить консоль как можно быстрее мы <strong class="userinput">НЕ</strong></span> разрешим 
   <strong class="userinput">DHCP</strong></span> в <strong class="userinput">LAN</strong></span> в настоящий момент (как 
   показано ниже). Он будет настроен с применением веб- интерфейса.</p>
   <p>Для продолжения введите <strong class="userinput">n</strong></span>, затем нажмите <strong class="userinput">ENTER</strong></span>.</p>
	<div class="figure"><a id="Fig0221"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0221.jpg" width="453" height="263"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Теперь вас попросят вернуться в веб- интерфейс (как изображено ниже) из безопасного режима (https) в не безопасный (http). Вы можете 
   пожелать оставить его безопасным.</p>
   <p>Для продолжения введите <strong class="userinput">n</strong></span>, затем нажмите <strong class="userinput">ENTER</strong></span>.</p>
	<div class="figure"><a id="Fig0222"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0222.jpg" width="452" height="261"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Настройка теперь должна быть завершена.</p>
   <p>Для продолжения нажмите <strong class="userinput">ENTER</strong></span>.</p>
	<div class="figure"><a id="Fig0223"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0223.jpg" width="454" height="264"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0205"> </a>2.5 Сброс пароля администратора</h3>
   </div></div></div>
   <p>В какой-то момент вы можете захотеть изменить полномочия администратора на значения по умолчанию. Это параметр меню номер 
   <strong class="userinput">3</strong></span> (как изображено ниже)</p>
	<div class="figure"><a id="Fig0224"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0224.jpg" width="452" height="262"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Если вы выберите параметр <strong class="userinput">3</strong></span> и нажмёте <strong class="userinput">y</strong></span>, 
   означающее <strong class="userinput">YES</strong></span>. Значения по умолчанию:</p>
   <p>Пользователь: <span class="term"><strong class="userinput">admin</strong></span></p>
   <p>Пароль: <span class="term"><strong class="userinput">pfsense</strong></span></p>
	<div class="figure"><a id="Fig0225"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0225.jpg" width="452" height="262"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0206"> </a>2.6 Мастер веб- настройки</h3>
   </div></div></div>
   <p>Теперь вы готовы открыть ваш  веб браузер с только что установленным сетевым адресом 
   (<span class="term"><code>https://192.168.0.254</code></span>) для первой регистрации. Для целей данного руководства я применяю 
   Mozilla Firefox.</p>
   <p>Для продолжения (как изображено ниже): кликните <strong class="userinput">I Understand the Risks</strong></span> (я понимаю риски).</p>
	<div class="figure"><a id="Fig0226"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0226.jpg" width="417" height="227"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Далее (как изображено ниже): кликните <strong class="userinput">Add Exception</strong></span> (добавить исключение).</p>
	<div class="figure"><a id="Fig0227"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0227.jpg" width="417" height="296"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Теперь (как изображено ниже): кликните <strong class="userinput">Confirm Security Exception</strong></span> (подтвердите 
   исключение безопасности).</p>
	<div class="figure"><a id="Fig0228"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0228.jpg" width="330" height="330"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Для продолжения зарегистрируйтесь (как изображено ниже) с применением пароля по умолчанию: <span class="term"><code>pfsense</code></span></p>
	<div class="figure"><a id="Fig0229"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0229.jpg" width="250" height="249"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>После регистрации запустится мастер (как изображено ниже). Просто следуйте за приглашениями.</p>
   <p>Для продолжения кликните <strong class="userinput">Next</strong></span></p>
	<div class="figure"><a id="Fig0230"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0230.jpg" width="453" height="158"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Теперь pfSense предложит выполнить <strong class="userinput">Gold Subscription</strong></span> (Золотую подписку, как изображено ниже). 
   Это совсем <strong class="userinput">НЕ</strong></span> требуется для использования данного программного обеспечения.</p>
   <p>Для продолжения кликните <strong class="userinput">Next</strong></span></p>
	<div class="figure"><a id="Fig0231"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0231.jpg" width="451" height="228"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Теперь вас попросят ввести некоторую основную информацию о вашем маршрутизаторе (как изображено ниже). Для определения домена 
   <span class="term"><strong class="userinput"><code>.com</code></strong></span> отличного от 
   <span class="term"><strong class="userinput"><code> localdomain</code></strong></span> или 
   <span class="term"><strong class="userinput"><code>YOURWEBS</code></strong></span> 
   <span class="term"><strong class="userinput">ДОЛЖНЫ</strong></span> иметь регистрацию, например
   <span class="term"><strong class="userinput"><code>Go Daddy</code></strong></span>.</p>
   <p>Например: я зарегистрировал домен <span class="term"><strong class="userinput"><code>YOURWEBS.US</code></strong></span>, поэтому 
   я могу ввести его ниже. Если у меня нет такого зарегистрированного домена, я могу всё же использовать 
   <span class="term"><strong class="userinput"><code>YOURWEBS</code></strong></span>, но опускать суффикс
   <span class="term"><strong class="userinput"><code>.US</code></strong></span>. Это будет просто прекрасно работать при установленным мной 
   локальном контроллере домена <span class="term"><strong class="userinput">Zentyal</strong></span>. Вне зависимости от выбранного вами имени 
   запись вашего домена должна <span class="term"><strong class="userinput">совпадать</strong></span> с записью контроллера 
   <span class="term"><strong class="userinput">Zentyal</strong></span>, который будет установлен позже в этой книге. В данном месте я 
   предпочитаю <span class="term"><strong class="userinput">регистрировать</strong></span> домен, который 
   <span class="term"><strong class="userinput">НЕ</strong></span> будет использоваться в качестве <span class="emphasis"><em>общедоступного</em></span>
   (public), однако будет всё же разрешается в мой IP адрес <span class="term"><strong class="userinput">WAN</strong></span>.</p>
   <p>Вы также можете захотеть использовать сервера <span class="term"><strong class="userinput">Google DNS</strong></span> 
   (<span class="term"><code>8.8.8.8</code></span> и <span class="term"><code>8.8.4.4</code></span>) в качестве 
   <span class="emphasis"><em>альтернативы</em></span> вместо вашего <a class="link" href="https://ru.wikipedia.org/wiki/Интернет-провайдер" 
   target="_top">ISP</a>. Этот параметр может иногда решать проблемы с разрешением имён.</p>
   <p>Для продолжения кликните <strong class="userinput">Next</strong></span></p>
	<div class="figure"><a id="Fig0232"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0232.jpg" width="452" height="320"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Теперь введите ваш сервер времени (рекомендуется значение по умолчанию) и информацию о зоне времени (как изображено ниже).</p>
   <p>Для продолжения кликните <strong class="userinput">Next</strong></span></p>
	<div class="figure"><a id="Fig0233"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0233.jpg" width="451" height="202"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Поскольку <strong class="userinput">WAN</strong></span> уже была настроена ранее, это является избыточным. По состоянию на сегодняшний день, 
   почти для всех ISP следует почти <strong class="userinput">ВСЕГДА</strong></span> настраивать <strong class="userinput">DHCP</strong></span>
   (как изображено ниже).</p>
	<div class="figure"><a id="Fig0234"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0234.jpg" width="452" height="115"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Перемотайте вниз экрана до появления следующих параметров (как изображено ниже). Вы хотите пометить оба этих интерфейса 
   <strong class="userinput">WAN</strong></span>.</p>
   <p>Для продолжения кликните <strong class="userinput">Next</strong></span></p>
	<div class="figure"><a id="Fig0235"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0235.jpg" width="455" height="192"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Поскольку вы уже настроили свой интерфейс <strong class="userinput">LAN</strong></span> данный шаг снова избыточен. Значение 
   (изображённое ниже) должно соответствовать введённому вами на этапе установки через консоль.</p>
   <p>Для продолжения кликните <strong class="userinput">Next</strong></span></p>
	<div class="figure"><a id="Fig0236"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0236.jpg" width="451" height="206"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Далее вы должны изменить установленный по умолчанию <strong class="userinput">пароль администратора</strong></span> (как изображено ниже) 
   для большей безопасности (убедитесь чтовы сделали это).</p>
   <p>Для продолжения кликните <strong class="userinput">Next</strong></span></p>
	<div class="figure"><a id="Fig0237"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0237.jpg" width="452" height="207"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Теперь pfSense перезагрузит изменения настроек (как изображено ниже).</p>
   <p>Для продолжения кликните <strong class="userinput">Reload</strong></span></p>
	<div class="figure"><a id="Fig0238"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0238.jpg" width="451" height="137"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Наши поздравления! Вы выполнили начальную установку.</p>
   <p>Для продолжения кликните ссылку <strong class="userinput">here</strong></span>, как <strong class="userinput">изображено 
   ниже</strong></span>.</p>
	<div class="figure"><a id="Fig0239"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0239.jpg" width="450" height="176"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0207"> </a>2.7 Смена тем</h3>
   </div></div></div>
   <p>Тема по умолчанию и инструментальная панель будут выглядеть как- то навроде рисунка показанного ниже. Отметим, что всё выравнено по 
   левому краю. Я предпочитаю изменять это на выравнивание по центру для более простой навигации и совместимости с мобильным телефоном.</p>
	<div class="figure"><a id="Fig0240"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0240.jpg" width="453" height="601"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Давайте изменим тему по умолчанию на <strong class="userinput">NERVECENTER</strong></span> путём выбора 
   <strong class="userinput">System&gt;General Setup</strong></span> как отображено ниже.</p>
	<div class="figure"><a id="Fig0241"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0241.jpg" width="313" height="218"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Теперь отмотаем вниз и выберем тему <strong class="userinput">NERVECENTER</strong></span> из ниспадающего списка. Не забывайте сохранять 
   изменения!</p>
	<div class="figure"><a id="Fig0242"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0242.jpg" width="439" height="153"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Ваша новая тема <strong class="userinput">NERVECENTER</strong></span> должна выглядеть примерно так как изображено ниже.</p>
	<div class="figure"><a id="Fig0243"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0243.jpg" width="450" height="602"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0208"> </a>2.8 Настройка сервера DHCP</h3>
   </div></div></div>
   <p>Следующий шаг состоит в активации сервера DHCP в <strong class="userinput">LAN</strong></span>. Он будет назначать IP адреса всем локально 
   подключаемым машинам.</p>
   <p>Для продолжения кликните <strong class="userinput">System&gt;DHCP Server</strong></span> как изображено ниже.</p>
	<div class="figure"><a id="Fig0244"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0244.jpg" width="271" height="255"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Вам следует посмотреть следующее окно (отображённое ниже). Пометьте блок <strong class="userinput">Enable DHCP server on 
   LAN interface</strong></span> (Активировать сервер DHCP на интерфейса <strong class="userinput">LAN</strong></span>).</p>
	<div class="figure"><a id="Fig0245"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0245.jpg" width="496" height="80"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>После пометки блока службы вам нужно установить <strong class="userinput">диапазон</strong></span> (range, как изображено ниже). 
   Я предпочитаю использовать <strong class="userinput">диапазон</strong></span> (<span class="term"><code>x.x.x.100-x.x.x.200</code></span>). 
   Это позволяет статичное резервирование адресов до и после данного диапазона, что очень полезно. Также отметим 
   <span class="emphasis"><em>Deny unknown clients switch</em></span> (Запретить коммутацию неизвестных клиентов, как изображено ниже). 
   Я предпочитаю сохранять его не помеченным пока все записи не добавлены в вашу систему. Когда всё будет будет проверено и заработает, 
   мы сможете пометить этот блок и сохранить изменения. Это позволит предотвратить получение адресов не авторизованными аппаратными 
   средствами в вашей системе (<span class="emphasis"><em>что очень полезно и настоятельно рекомендуется</em></span>).</p>
	<div class="figure"><a id="Fig0246"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0246.jpg" width="441" height="152"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="020801"> </a>
	  <span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">2.8.1 WINS, DNS, шлюз и домен</span></h4>
    </div></div></div>
    <p>Когда <span class="emphasis"><em>клиент</em></span> присоединяется к серверу <strong class="userinput">DHCP</strong></span>, он 
	получает всю информацию от следующих записей. В этом примере мы установим <strong class="userinput">Zentyal</strong></span> 
	для работы в качестве сервера каталога для домена <span class="term"><strong class="userinput"><code>YOURWEBS.US</code></strong></span>.
	Записи <strong class="userinput">серверов WINS</strong></span> ниже являются адресами 
	<span class="term"><strong class="userinput"><code>ZentyalDC1</code></strong></span> и
	<span class="term"><strong class="userinput"><code>ZentyalDC2</code></strong></span> соответственно. Записи 
	<strong class="userinput">DNS</strong></span> и <strong class="userinput">Gateway</strong></span> являются IP интерфейсом LAN 
	<strong class="userinput">pfSense</strong></span></p>
	<div class="figure"><a id="Fig0247"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0247.jpg" width="452" height="236"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Изображение ниже отображает другой коммутатор безопасности, который я предпочитаю оставлять выключенным пока всё не будет проверено и 
	на заработает. Разрешив <strong class="userinput">Enabling Static ARP Entries</strong></span> pfSense (Активация статичных записей ARP)
	позволит предотвращать взаимодействие с адаптером <strong class="userinput">LAN</strong></span>
	<strong class="userinput">ЛЮБОМУ</strong></span> оборудованию <strong class="userinput">ВНЕ</strong></span> списка. Это ещё один 
	мощный инструмент помогающий вам сохранять безопасность сетевой среды (<span class="emphasis"><em>настоятельно рекомендуется</em></span>)!</p> 
	<div class="figure"><a id="Fig0248"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0248.jpg" width="451" height="55"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="020802"> </a>
	  <span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">2.8.2 Резервирование клиента DHCP</span></h4>
    </div></div></div>
    <p>Если вы отмотаете страницу вниз, вы увидите таблицу статичных соответствий (Static mappings table). Изображённая ниже является 
	<span class="emphasis"><em>предварительно заполняемой</em></span> (pre-populated) и имеет цель снабдить вас концепцией того как эта таблица 
	будет выглядеть после создания нескольких записей. Я настоятельно рекомендую вводить 
	<span class="term"><strong class="userinput">ВСЁ</strong></span> адреса оборудования в вашей сетевой сред здесь с полными описаниями 
	(как отображено ниже). Не то чтобы это было <span class="term"><strong class="userinput">необходимым</strong></span> если вы хотите 
	разрешить <span class="term"><strong class="userinput">записи статичных ARP</strong></span> (отображённый выше), но это становится 
	очень удобно если вам нужно быстро просматривать IP адреса всех машин в вашей сетевой среде.</p>
	<p>Чтобы сделать запись: кликните кнопку <span class="term"><strong class="userinput">+</strong></span> в правой стороне (как 
	отображено ниже).</p>
	<div class="figure"><a id="Fig0249"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0249.jpg" width="451" height="178"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Далее вы должны увидеть форму записи DHCP (отображённую ниже). Я включил простую запись для справки (как отображено ниже). После 
	изготовления записи убедитесь в сохранении ваших изменений.</p>
      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
	   <table border="0" summary="Замечание"><tr><td rowspan="2" align="center" valign="top" width="25"><a id="DockerBooleanFlags"> </a>
	   <img alt="[Замечание]" src="../common/images/admon/note.png"/></td><th align="left">Замечание</th></tr><tr><td align="left" valign="top">
	   <p>На самом деле <span class="term"><strong class="userinput">НЕТ</strong></span> необходимости делать здесь записи WINS, DNS, шлюза 
	   и тому подобного. По умолчанию <span class="term"><strong class="userinput">IP интерфейс pfSense</strong></span> будет 
	   управлять <span class="term"><strong class="userinput">ВСЕМИ</strong></span> клиентами автоматически.</p></td></tr></table>
     </div>
	<div class="figure"><a id="Fig0250"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0250.jpg" width="449" height="601"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   </div>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0209"> </a>2.9 Настройка сервера DHCP</h3>
   </div></div></div>
   <p>Последняя вещь, которую вы должны сделать, это установить пару правил межсетевого экрана. Мы разрешим ВЕСЬ обмен между клиентами 
   <strong class="userinput">LAN</strong></span> и позволим ВСЕМ клиентам <strong class="userinput">LAN</strong></span> 
   выходить в <strong class="userinput">WAN</strong></span>. Вначале мы добавим правило <span class="term"><code>LAN to LAN</code></span>.</p>
   <p>Для выполнения кликните <strong class="userinput">Firewall&gt;Rules</strong></span> как показано ниже.</p>
	<div class="figure"><a id="Fig0251"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0251.jpg" width="165" height="155"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="020901"> </a>
	  <span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">2.9.1 Правила LAN</span></h4>
    </div></div></div>
    <p>Вы должны увидеть закладки с именами ваших сетевых интерфейсов. Некоторые из моих закладок (изображённых ниже) имеют 
	<span class="emphasis"><em>другие имена</em></span>. Просто я их переименовал! Например: я переименовал свой интерфейс 
	<strong class="userinput">WAN</strong></span> в <strong class="userinput">JAB</strong></span>. Единственные интерфейсы, которые мы 
	собираемся рассматривать это <strong class="userinput">LAN</strong></span> и <strong class="userinput">WAN</strong></span>. 
	Изображённый ниже список является <span class="emphasis"><em>предварительно заполняемым</em></span> для представления концепции того, 
	как таблица будет выглядеть после изготовления наших записей правил <strong class="userinput">LAN</strong></span>.</p>
	<div class="figure"><a id="Fig0252"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0252.jpg" width="438" height="158"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Чтобы добавить новое правило <strong class="userinput">LAN to LAN</strong></span>, кликните на кнопку <strong class="userinput">+</strong></span>
	в правой части (как изображено ниже).</p>
	<div class="figure"><a id="Fig0253"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0253.jpg" width="437" height="104"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Рисунок ниже показывает заполненное правило <strong class="userinput">LAN to LAN</strong></span>. Задублируйте это правило не забыв 
	сохранить изменения по завершению.</p>
	<div class="figure"><a id="Fig0254"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0254.jpg" width="435" height="412"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="020902"> </a>
	  <span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">2.9.2 Правила WAN</span></h4>
    </div></div></div>
    <p>Далее мы установим правило, позволяющее всем <strong class="userinput">LAN</strong></span> выходить в <strong class="userinput">WAN</strong></span>.
	Вспомните, я переименовал <strong class="userinput">WAN</strong></span> в <strong class="userinput">JAB</strong></span> (как изображено 
	ниже)! Запись в вашей системе будет выполнена в закладке <strong class="userinput">WAN</strong></span>. Список рисунков ниже является 
	<span class="emphasis"><em>предварительно заполненным</em></span> чтобы представить вам идею того, как будет выглядеть таблица после 
	составления правила <strong class="userinput">WAN</strong></span>.</p>
	<div class="figure"><a id="Fig0255"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0255.jpg" width="446" height="160"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Чтобы добавить новое правило <strong class="userinput">LAN to ANY</strong></span>, кликните на кнопку <strong class="userinput">+</strong></span>
	в правой части (как изображено ниже).</p>
	<div class="figure"><a id="Fig0256"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0256.jpg" width="442" height="103"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Рисунок ниже отображает заполненное правило <strong class="userinput">LAN to ANY</strong></span> в интерфейсе 
	<strong class="userinput">WAN</strong></span>. Задублируйте это правило не забыв сохранить изменения по завершению!</p>
	<div class="figure"><a id="Fig0257"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0257.jpg" width="441" height="414"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   </div>
  </div>
  
  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0210"> </a>2.10 OpenVPN</h3>
   </div></div></div>
   <p>OpenVPN является туннелирующим протоколом, который делает возможным безопасный удалённый доступ в вашу систему. Присоединившись к туннелю 
   VPN клиенты могут работать так, будто они находятся на площадке. Чтобы VPN заработал, вам нужно иметь статичный IP адрес, а все 
   удалённые машины должны иметь связующего клиента. Ручная настройка VPN может быть достаточно трудоёмкой даже для профессионалов, однако 
   разработчики pfSense включили в состав фантастический мастер, позволяющий вам поднять всё и запустить с минимальными усилиями.</p>
      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
	   <table border="0" summary="Замечание"><tr><td rowspan="2" align="center" valign="top" width="25"><a id="DockerBooleanFlags"> </a>
	   <img alt="[Замечание]" src="../common/images/admon/note.png"/></td><th align="left">Замечание</th></tr><tr><td align="left" valign="top">
	   <p>Даже при наличии мастера это будет длинная глава, поэтому сделайте запасы кофе и соберите всё своё внимание! Давайте 
	   приступим!</p></td></tr></table>
     </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="021001"> </a>
	  <span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">2.10.1 Утилита экспорта клиента OpenVPN</span></h4>
    </div></div></div>
    <p>Для начала кликните <strong class="userinput">System&gt;Packages</strong></span> (как показано ниже).</p>
	<div class="figure"><a id="Fig0258"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0258.jpg" width="261" height="227"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Если вы не видите <span class="emphasis"><em>OpenVPN Client Export Utility</em></span> в
	<strong class="userinput">Installed Packages</strong></span>, загрузите и установите её в закладке 
	<strong class="userinput">Installed Packages</strong></span> (изображённой ниже).</p>
	<div class="figure"><a id="Fig0259"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0259.jpg" width="451" height="158"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="021002"> </a>
	  <span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">2.10.2 Мастер настройки OpenVPN</span></h4>
    </div></div></div>
    <p>После установки <span class="emphasis"><em>OpenVPN Client Export Utility</em></span> перейдите в главный экран инструментальной 
	панели, а затем кликните <strong class="userinput">VPN&gt;OpenVPN</strong></span> (как изображено ниже).</p>
	<div class="figure"><a id="Fig0260"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0260.jpg" width="169" height="116"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Затем кликните на вкладку мастера (Wizard, как изображено ниже).</p>
	<div class="figure"><a id="Fig0261"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0261.jpg" width="452" height="84"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Теперь выберите <strong class="userinput">Local User Access</strong></span> в ниспадающем меню, а затем кликните кнопку
	<strong class="userinput">Next</strong></span> (как отображено ниже).</p>
	<div class="figure"><a id="Fig0262"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0262.jpg" width="450" height="155"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Теперь вам нужно установить <strong class="userinput">Certificate Authority</strong></span> (CA, сертификат авторизации). Заполните 
	форму как показано ниже и потом кликните <strong class="userinput">Add new CA</strong></span>.</p>
	<div class="figure"><a id="Fig0263"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0263.jpg" width="452" height="379"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Далее нам понадобится создать <span class="emphasis"><em>New Server Certificate</em></span> (сертификат нового сервера). Оставьте 
	<strong class="userinput">Key length</strong></span> (длину ключа) со значением <span class="term"><code>1024 bits</code></span> для 
	лучших результатов. Затем, по завершению, кликните <strong class="userinput">Create new Certificate</strong></span> (создать новый
	сертификат, как изображено ниже).</p>
	<div class="figure"><a id="Fig0264"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0264.jpg" width="451" height="378"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>В приводимом ниже на рисунке разделе <span class="emphasis"><em>общей информации</em></span> (General Information) я оставил 
	значения <strong class="userinput">Protocol</strong></span> и <strong class="userinput">Port</strong></span> как 
	<span class="emphasis"><em>default</em></span>. <strong class="userinput">Interface</strong></span> обычно должен быть
	<strong class="userinput">WAN</strong></span>, но я переименовал свой в <strong class="userinput">JAB</strong></span> для 
	этого сервера. Это поможет для целей идентификации при наличии множества соединений <strong class="userinput">WAN</strong></span>, 
	обслуживающих туннели VPN.</p>
	<div class="figure"><a id="Fig0265"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0265.jpg" width="450" height="238"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p><span class="emphasis"><em>Настройки шифрования</em></span> (Cryptographic Settings, показанные ниже) также должны быть оставленными 
	в значениях <span class="emphasis"><em>по умолчанию</em></span> пока вы не поймёте что вы делаете.</p>
	<div class="figure"><a id="Fig0266"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0266.jpg" width="455" height="301"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Для <span class="emphasis"><em>Настроек туннеля</em></span> (Tunnel Settings, отображённых ниже) я разрешаю <strong class="userinput">одного 
	клиента</strong></span> в <span class="term"><code>10.10.10.0/24</code></span> <strong class="userinput">сетевой среде туннеля</strong></span>. 
	Этот клиент будет иметь доступ к <strong class="userinput">локальной сети</strong></span> <span class="term"><code>192.168.0.0/24</code></span>.</p>
	<div class="figure"><a id="Fig0267"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0267.jpg" width="451" height="287"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>В <span class="emphasis"><em>Настройках клиента</em></span> (Client Settings, изображённых ниже) я разрешаю <strong class="userinput">Dynamic 
	IP</strong></span> и <strong class="userinput">Address Pool</strong></span> (динамичный IP и пул адресов). Я также назначаю 
	<strong class="userinput">pfSense IP address</strong></span> на <strong class="userinput">сервер DNS</strong></span> и поддержку 
	<span class="term"><code>YOURWEBS.US</code></span> в качестве <strong class="userinput">домена поумолчанию</strong></span>. Затем завершаем 
	нажатием <strong class="userinput">Next</strong></span> (как отображено ниже).</p>
	<div class="figure"><a id="Fig0268"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0268.jpg" width="450" height="587"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Мастер теперь установит правила межсетевого экрана. Для продолжения нажмите <strong class="userinput">Next</strong></span> (как отображено 
	ниже).</p>
	<div class="figure"><a id="Fig0269"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0269.jpg" width="452" height="259"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Теперь мастер выполнит настройку вашего VPN. Для продолжения нажмите <strong class="userinput">Next</strong></span> (как отображено 
	ниже).</p>
	<div class="figure"><a id="Fig0270"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0270.jpg" width="452" height="173"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>По завершению вы увидите вашу настройку сервера как отображено ниже.</p>
	<div class="figure"><a id="Fig0271"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0271.jpg" width="451" height="110"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   </div>
 
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="021003"> </a>
	  <span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">2.10.3 Соединения клиента OpenVPN</span></h4>
    </div></div></div>
    <p>Для того чтобы любой клиент мог соединиться с вашим сервером VPN <strong class="userinput">ДОЛЖНЫ</strong></span> быть установлены 
	экспортируемые соединения клиента. Вам следует применять установки <span class="emphasis"><em>по умолчанию</em></span> (как изображено 
	ниже) для ваших пакетов соединения.</p>
	<div class="figure"><a id="Fig0272"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0272.jpg" width="450" height="477"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>В нижней части этой страницы вы найдёте <strong class="userinput">гиперссылки</strong></span> для 
	<strong class="userinput">пакетов установки клиента</strong></span> (Client Install Packages) в колонке 
	<strong class="userinput">Exports</strong></span> справа (как показано ниже). Просто кликните по ссылке на пакет, который вы 
	собираетесь загрузить.</p>
	<div class="figure"><a id="Fig0273"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0273.jpg" width="450" height="237"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Когда появится диалог загрузки (как изображено ниже), сохраните файл на диск для установки на вашей клиентской машине. 
	<span class="term"><strong class="userinput">Пожалуйста, имейте в виду</strong></span>: Когда <span class="emphasis"><em>устанавливаете</em></span> 
	соединители для <span class="emphasis"><em>Windows</em></span> клиентов, вы должны быть уверены,что выполняете установку в правами
	<span class="emphasis"><em>Администратора</em></span>!</p>
	<div class="figure"><a id="Fig0274"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0274.jpg" width="273" height="120"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="021004"> </a>
	  <span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">2.10.4 Аутентификация пользователей домена Zentyal</span></h4>
    </div></div></div>
    <p>Теперь, когда у вас есть сервер VPN, давайте настроим его так, чтобы пользователи Домена могли выполнять аутентификацию и использовать его!
	Чтобы сделать это вам вначале надо получить установку <span class="term"><strong class="userinput">Zentyal</strong></span>, которая описана 
	в <a class="link" href="Ch04.html" target="_top">Книге 4. Контроллер домена Zentyal</a>.</p>
	<p>При наличии установленного <span class="term"><strong class="userinput">Zentyal</strong></span> давайте продолжим, кликнув 
	<strong class="userinput">System&gt;User Manager</strong></span> (как показано ниже).</p>
	<div class="figure"><a id="Fig0275"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0275.jpg" width="262" height="257"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Далее кликните по закладке <strong class="userinput">Servers</strong></span> (как показано ниже). Заметим: приводимый ниже список уже 
	предварительно заполнен <span class="term"><strong class="userinput"><code>ZentyalDC1</code></strong></span> на для вашей справки. Ваша 
	установка должна отображать на данный момент только <span class="term"><strong class="userinput"><code>Local Database</code></strong></span>.</p>
	<p>Чтобы добавить новый сервер кликните на кнопку <strong class="userinput">+</strong></span (как показано ниже).</p>
	<div class="figure"><a id="Fig0276"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0276.jpg" width="450" height="123"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Затем вам нужно ввести информацию о вашем контроллере домена <span class="term"><strong class="userinput">Zentyal</strong></span> 
	 (как показано ниже).</p>
      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
	   <table border="0" summary="Замечание"><tr><td rowspan="2" align="center" valign="top" width="25"><a id="DockerBooleanFlags"> </a>
	   <img alt="[Замечание]" src="../common/images/admon/note.png"/></td><th align="left">Замечание</th></tr><tr><td align="left" valign="top">
	   <p>Синтаксис <span class="term"><strong class="userinput">Base DN</strong></span> должен вводиться 
	   <span class="emphasis"><em>точно</em></span>. Если ваш домен <span class="term"><strong class="userinput"><code>xyz.com</code></strong></span>,
	   то <span class="term"><strong class="userinput">Base DN</strong></span> должен быть или он не будет работать.
	   Данная информация может быть также найдена в <span class="term"><strong class="userinput"><code>DC=xyz,DC=com</code></strong></span>
	   в <span class="emphasis"><em>Zentyal management interface</em></span> под <span class="term"><strong class="userinput">Users and 
	   Computers&gt;LDAP Settings</strong></span>. Также отметим, я выбрал <span class="emphasis"><em>Microsoft AD</em></span>
	   в качестве <span class="term"><strong class="userinput">начального шаблона</strong></span> (Initial Template, как изображено ниже).
	   По завершению кликните <span class="term"><strong class="userinput">Save</strong></span>.</p></td></tr></table>
     </div>
	<div class="figure"><a id="Fig0277"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0277.jpg" width="450" height="583"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Теперь мы проверим новый <span class="emphasis"><em>сервер аутентификации</em></span>. Выберите сервер в закладке 
	<span class="term"><strong class="userinput">Settings</strong></span>
	<span class="term"><strong class="userinput">Save and Test</strong></span> (как изображено ниже).</p>
	<div class="figure"><a id="Fig0278"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0278.jpg" width="451" height="122"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Тест должен успешно выполниться, как отображено ниже. Если нет, повторно проверьте ваши настройки и повторите попытку. Когда завершите, 
	кликните <span class="term"><strong class="userinput">Close</strong></span> (как изображено ниже).</p>
	<div class="figure"><a id="Fig0279"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0279.jpg" width="446" height="272"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Чтобы смонтировать самый высокий уровень безопасности нам потребуются <span class="term"><strong class="userinput">только</strong></span>
	аутентификация <span class="term"><strong class="userinput">Zentyal</strong></span> <span class="emphasis"><em>пользователей VPN</em></span>. 
	Проверьте что вы изменили <span class="term"><strong class="userinput">сервер аутентификации</strong></span> назад на 
	<span class="term"><strong class="userinput">локальную базу данных</strong></span> после тестирования (как показано ниже).</p>
	<div class="figure"><a id="Fig0280"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0280.jpg" width="452" height="124"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Завершающий шаг состоит в <span class="emphasis"><em>активации</em></span> (enable) сервера 
	<span class="term"><strong class="userinput">Zentyal</strong></span> в качестве <span class="term"><strong class="userinput">основы 
	для аутентификации</strong></span> (Backend for authentication) в сервере <span class="term"><strong class="userinput">OpenVPN</strong></span>.
	Чтобы сделать это, кликните <span class="term"><strong class="userinput">VPN&gt;OpenVPN</strong></span> с последующим 
	<span class="emphasis"><em>изменением</em></span> сервера чтобы убедиться, что новый сервер 
	<span class="term"><strong class="userinput">Zentyal</strong></span></p> 
	<span class="term"><strong class="userinput">выделен</strong></span> как показано ниже. По завершению не забудьте сохранить изменения!
	<div class="figure"><a id="Fig0281"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0281.jpg" width="451" height="259"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   </div>
  </div>
  
  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0211"> </a>2.11 Snort IDS</h3>
   </div></div></div>
   <p>Одним из важнейших компонентов любой современной деловой сетевой среды является обнаружение вторжений или 
   <span class="term"><strong class="userinput">IDS</strong></span> (intrusion detection).
   Когда дело доходит до IDS, <span class="term"><strong class="userinput">Snort</strong></span> является наиболее популярным пакетом на сегодняшний 
   день! Концепцией поведения IDS является мониторинг протоколов передачи данных на предмет нехарактерного поведения и уничтожения соединения в 
   случае обнаружения такого поведения. Это именно тот способ, которым поставщики антивирусного и вредоносного ПО находят новые угрозы и 
   создают обновления для борьбы с такими угрозами.</p>
   <p>Большинство систем IDS настраиваются на наблюдение за внешними соединениями по умолчанию. Я рекомендую вместо этого наблюдать за 
   внутренними соединениями. Такая методика отлавливает злонамеренный код который может быть привнесён в портативные устройства, например, в 
   смартфоны и USB- флешки.</p>
      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
	   <table border="0" summary="Замечание"><tr><td rowspan="2" align="center" valign="top" width="25"><a id="DockerBooleanFlags"> </a>
	   <img alt="[Замечание]" src="../common/images/admon/note.png"/></td><th align="left">Замечание</th></tr><tr><td align="left" valign="top">
	   <p><span class="term"><strong class="userinput">Snort</strong></span> может быть достаточно сложным в установке для тех, кто незнаком с 
	   ним. Здесь будет приведён быстрый проход по большому количеству параметров настроек, поэтому убедитесь что вы точно копируете мои 
	   настройки! Давайте позволим <p><span class="term"><strong class="userinput">Snort</strong></span> работать уже сейчас!.</p></td></tr></table>
     </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="021101"> </a>
	  <span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">2.11.1 Установка пакета Snort</span></h4>
    </div></div></div>
    <p>Для начала кликните <span class="term"><strong class="userinput">System&gt;Packages</strong></span> (как показано ниже).</p>
	<div class="figure"><a id="Fig0282"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0282.jpg" width="262" height="226"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Вы не видите <span class="emphasis"><em>Snort</em></span> в <span class="term"><strong class="userinput">Установленных пакетах</strong></span>, 
	загрузите и установите его в закладке <span class="term"><strong class="userinput">Available Packages</strong></span> (как изображено 
	ниже).</p>
	<div class="figure"><a id="Fig0283"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0283.jpg" width="450" height="144"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>После установки пакета кликните <span class="term"><strong class="userinput">Services&gt;Snort</strong></span> (как изображено 
	ниже).</p>
	<div class="figure"><a id="Fig0284"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0284.jpg" width="156" height="231"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="021102"> </a>
	  <span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">2.11.2 Глобальные настройки Snort</span></h4>
    </div></div></div>
    <p>В закладке глобальных установок (Global Settings, показанной ниже) убедитесь, что отмечено <span class="term"><strong class="userinput">ONLY Emerging 
	Threats</strong></span> (только возникающие угрозы). Скопируйте все остальные настройки.</p>
	<div class="figure"><a id="Fig0285"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0285.jpg" width="451" height="553"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="021103"> </a>
	  <span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">2.11.3 Интерфейсы Snort</span></h4>
    </div></div></div>
    <p>В закладке <span class="term"><strong class="userinput">Snort Interfaces</strong></span> добавьте интерфейс кликнув на кнопку 
	<span class="term"><strong class="userinput">+</strong></span> (как показано ниже). Заметим: для справочных целей я присоединил предварительно 
	заполненный интерфейс.</p>
	<div class="figure"><a id="Fig0286"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0286.jpg" width="450" height="192"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Для данного примера мы добавим интерфейс <span class="term"><strong class="userinput"><code>LAN</code></strong></span> (как показано ниже), 
	который будет перехватывать предупреждения, вызываемые инфицированными USB флешками и смарт-фонами.</p>
	<div class="figure"><a id="Fig0287"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0287.jpg" width="448" height="140"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Для нормальной работы скопируйте мои параметры предупредительных настроек (Alert Settings). 
	<span class="term"><strong class="userinput">ВАЖНО</strong></span>: в процессе начального обучения вы захотите 
	<span class="term"><strong class="userinput">UNCHECK Block Offenders</strong></span> (снять флажок блокировки правонарушителей). Это лишь 
	временная мера, пока вы <span class="emphasis"><em>наблюдаете за нормальным трафиком</em></span> и добавляете все ложные предупреждения в 
	<span class="term"><strong class="userinput">suppression list</strong></span> (запретительный спсиок).</p>
	<div class="figure"><a id="Fig0288"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0288.jpg" width="451" height="113"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Для установок определения производительности (Detection Performance Settings) дублируйте мои настройки (показанные ниже).</p>
	<div class="figure"><a id="Fig0289"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0289.jpg" width="451" height="284"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Оставьте все настройки белого списка по умолчанию (как показано ниже).</p>
	<div class="figure"><a id="Fig0290"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0290.jpg" width="449" height="184"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Фильтр подавления (показанный ниже) будет генерироваться автоматически после начального наблюдения и добавления первой 
	запретительной записи.</p>
	<div class="figure"><a id="Fig0291"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0291.jpg" width="451" height="67"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Теперь, когда вы завершили настройку интерфейса <span class="term"><strong class="userinput"><code>LAN</code></strong></span>, 
	кликните <span class="term"><strong class="userinput">Save</strong></span>  (как показано ниже)</p>
	<div class="figure"><a id="Fig0292"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0292.jpg" width="451" height="176"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="021104"> </a>
	  <span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">2.11.4 Обновление правил угроз</span></h4>
    </div></div></div>
    <p>В закладке <span class="term"><strong class="userinput">Update</strong></span> (отобржённой ниже) кликните кнопку 
	<span class="term"><strong class="userinput">Update</strong></span> в середине страницы.</p>
	<div class="figure"><a id="Fig0293"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0293.jpg" width="452" height="296"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="021105"> </a>
	  <span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">2.11.5 Категории правил угроз</span></h4>
    </div></div></div>
    <p><span class="term"><strong class="userinput">Категории</strong></span> правил угроз являются 
	<span class="emphasis"><em>специфичными</em></span> для выбранного интерфейса. Поскольку мы настраиваем интерфейс 
	<span class="term"><strong class="userinput"><code>LAN</code></strong></span> для наблюдения, вы должны изменить этот особенный 
	интерфейс кликнув кнопку редактирования (<span class="term"><strong class="userinput">e</strong></span>) справа в закладке 
	<span class="term"><strong class="userinput">Snort Interfaces</strong></span>. Далее кликните на закладку LAN Categories и 
	выберите <span class="term"><strong class="userinput">ТОЛЬКО</strong></span> отображённые ниже правила. Выбор 
	<span class="emphasis"><em>прочих</em></span> правил <span class="term"><strong class="userinput">ЗАЛЬЁТ</strong></span> вас 
	<span class="emphasis"><em>лишними предупреждениями</em></span> и с ними стоит поэкспериментировать только когда вы освоите 
	<span class="term"><strong class="userinput">Snort</strong></span>.</p>
	<div class="figure"><a id="Fig0294"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0294.jpg" width="451" height="222"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
	<div class="figure"><a id="Fig0295"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0295.jpg" width="177" height="89"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="021106"> </a>
	  <span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">2.11.6 Добавление оповещений в список блокировок</span></h4>
    </div></div></div>
    <p>Поскольку <span class="term"><strong class="userinput">Snort</strong></span> выполняется, вы НАЧНЁТЕ просматривать предупреждения как 
	показано в списке ниже. Вы можете добавить предупреждения <span class="emphasis"><em>low-risk</em></span> (с низким риском) в 
	список запретов кликнув по кнопке плюс (<span class="term"><strong class="userinput">+</strong></span>) в колонке 
	<span class="term"><strong class="userinput">SID</strong></span> (как показано ниже).</p>
		 <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
			<table border="0" summary="Совет"><tr><td rowspan="2" align="center" valign="top" width="25">
			<img alt="[Совет]" src="../common/images/admon/tip.png"/></td><th align="left">Подсказка:</th></tr><tr><td align="left" valign="top">
			<p>Используйте здравы смысл при создании запретительного списка!</p></td></tr></table>
		  </div>
	<div class="figure"><a id="Fig0296"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0296.jpg" width="450" height="270"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
    <p>Когда вы запретите <span class="term"><strong class="userinput"><em class="emphasis">все</em></span></strong></span> предупреждения, 
	список подавления должен <span class="term"><strong class="userinput"><em class="emphasis">генерироваться 
	автоматически</em></span></strong></span> (auto-generated, как показано ниже).</p>
	<div class="figure"><a id="Fig0297"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0297.jpg" width="450" height="87"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="021107"> </a>
	  <span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">2.11.7 Блокировка источника нарушения правил</span></h4>
    </div></div></div>
    <p>Поскольку вы наблюдаете за обычным сетевым обменом и установили список подавлений, самое время <span class="emphasis"><em>позволить 
	работать Snort</em></span>. Теперь вы можете вернуться в настройки <span class="term"><strong class="userinput">Snort 
	Interface</strong></span> и разрешить <span class="emphasis"><em>offenders to be blocked at the source</em></span> (блокировку 
	злоумышленников в источнике). Запомните, этот параметр я рекомендую оставлять не помеченным, пока вы изменяете наблюдение за 
	обменом.</p>
	 <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
      <table border="0" summary="Предостережение"><tr><td rowspan="2" align="center" valign="top" width="25">
      <img alt="[Предостережение]" src="../common/images/admon/warning.png"/></td><th align="left">ВАЖНО:</th></tr><tr><td align="left" valign="top">
      <p><span class="term"><strong class="userinput">Snort</strong></span> очень мощен и <span class="term"><strong class="userinput">БУДЕТ</strong></span>
	  блокировать обмен! Он даже может блокировать Вас! Если случится такое, зарегистрируйтесь в pfSense с другого компьютера, 
	  <span class="emphasis"><em>временно запретите блокировку</em></span> и просто <span class="emphasis"><em>убедитесь</em></span> в безопасности 
	  заблокированной машины просканировав её на наличие <span class="emphasis"><em>вирусов</em></span> и 
	  <span class="emphasis"><em>вредоносного ПО</em></span>! Когда установлена и настроена надлежащим образом, эта система 
	  <span class="term"><strong class="userinput">СКАЛА</strong></span>!</p></td></tr></table>
     </div>
	<div class="figure"><a id="Fig0298"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0298.jpg" width="451" height="152"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   </div>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0212"> </a>2.12 Резервные копии настроек</h3>
   </div></div></div>
   <p>Помимо применения резервных копий образов ВМ также целесообразно сохранять копию настроек pfSense. Резервная копия настроек в особенности 
   важна когда разработчики переписывают сборку таким образом, что нарушают определённые пакеты обновлений. В этих обстоятельствах резервная 
   копия образа вашей ВМ вернёт вас только назад к версии, которую вы применяли до того. У меня это случилось только 1 раз за последние 7 лет,
   так что не надо сильно беспокоиться!</p>
   <p>Чтобы получить доступ к странице резервного копирования настройки кликните 
   <span class="term"><strong class="userinput">Diagnostics&gt;Backup/Restore</strong></span> (как изображено ниже).</p>
	<div class="figure"><a id="Fig0299"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig0299.jpg" width="171" height="199"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Вы должны увидеть диалог Backup/Restore как показано ниже. Теперь кликните по кнопке 
   <span class="term"><strong class="userinput">Download configuration</strong></span></p>
	<div class="figure"><a id="Fig02A0"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig02A0.jpg" width="453" height="423"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Когда возникнет диалог загрузки (как показано ниже), сохраните вашу настройку на диск.</p>
		 <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
			<table border="0" summary="Совет"><tr><td rowspan="2" align="center" valign="top" width="25">
			<img alt="[Совет]" src="../common/images/admon/tip.png"/></td><th align="left">Подсказка:</th></tr><tr><td align="left" valign="top">
			<p>Я люблю сохранять её копию на флешке!</p></td></tr></table>
		  </div>
	<div class="figure"><a id="Fig02A1"> </a>
	 <p class="title"><strong> </strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="figures/Fig02A1.jpg" width="268" height="186"/><br />
	 <span></span>
	 </div></div>
	</div><br class="figure-break"/>
   <p>Восстановление вашего pfSense должно быть самоочевидным! Просто воспользуйтесь параметром восстановления настройки!</p>
  </div>  
 </div>


<!----><script type="text/javascript" src="FooterAndSidebar.js">
</script><script type="text/javascript"><!--</div id="content"> is inside next code
document.write(FooterAndSidebar);//-->
</script>

</body></html>