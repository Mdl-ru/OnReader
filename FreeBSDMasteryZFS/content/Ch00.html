<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:exsl="http://exslt.org/common" xmlns:ng="http://docbook.org/docbook-ng" xmlns:fb="http://ogp.me/ns/fb#">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet"/>
<title>Глава 0. Введение - Мастерство FreeBSD: ZFS</title>
<meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"/>
<meta name="mavenGroupId" content="www.mdl.ru"/>
<meta name="mavenArtifactId" content="FreeBSDMasteryZFS"/>
<meta name="mavenVersionId" content="1.0.0"/>
<link rel="home" href="index.html" title="Мастерство FreeBSD: ZFS"/>
<link rel="up" href="index.html" title="Мастерство FreeBSD: ZFS"/>
<link rel="prev" href="NeverMiss-aNewRelease.html" title="Всегда будь в курсе последних выпусков!"/>
<link rel="next" href="Ch02.html" title="Глава 2. Виртуальные устройства"/>
<meta name="git-sha" content=""/>
<meta name="buildTime" content=""/>
<script type="text/javascript">
            //The id for tree cookie
            var treeCookieId = "treeview-openstack-operations-guide";
            var language = "en";
            var w = new Object();
            //Localization
            txt_filesfound = 'Results';
            txt_enter_at_least_1_char = "You must enter at least one character.";
            txt_browser_not_supported = "Please enable JavaScript.";
            txt_please_wait = "Please wait. Search in progress...";
            txt_results_for = "Results for: ";
</script>
<style type="text/css">
            input {
            margin-bottom: 5px;
            margin-top: 2px;
            }

            .folder {
            display: block;
            height: 22px;
            padding-left: 20px;
            background: transparent url(../common/jquery/treeview/images/folder.gif) 0 0px no-repeat;
            }
</style>
<link rel="shortcut icon" href="../MdlLogo.gif" type="image/gif"/>
<link rel="stylesheet" type="text/css" href="../common/css/positioning.css"/>
<link rel="stylesheet" type="text/css" href="../common/css/custom.css"/>
<link rel="canonical" href="http://onreader.mdl.ru/FreeBSDMasteryZFS/content/index.html"/>
<!--[if IE]>
	<link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
<![endif]-->
<link rel="stylesheet" type="text/css" href="../common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css"/>
<link rel="stylesheet" type="text/css" href="../common/jquery/treeview/jquery.treeview.css"/>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.0.min.js"><!----></script>
<script type="text/javascript" src="../common/jquery/jquery-ui-1.8.2.custom.min.js"><!----></script>
<script type="text/javascript" src="../common/jquery/jquery.cookie.js"><!----></script>
<script type="text/javascript" src="../common/jquery/treeview/jquery.treeview.min.js"><!----></script>
<link rel="stylesheet" type="text/css" href="http://cdn.jsdelivr.net/qtip2/2.2.0/jquery.qtip.min.css"/>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/qtip2/2.2.0/jquery.qtip.min.js">
<!--jQuery plugin for glossary popups. --></script><script type="text/javascript" src="search/htmlFileList.js"><!----></script>
<script type="text/javascript" src="search/htmlFileInfoList.js"><!----></script>
<script type="text/javascript" src="search/nwSearchFnt.js"><!----></script>
<script type="text/javascript" src="search/stemmers/en_stemmer.js">
<!--//make this scalable to other languages as well.--></script>
<script type="text/javascript" src="search/index-1.js"><!----></script>
<script type="text/javascript" src="search/index-2.js"><!----></script>
<script type="text/javascript" src="search/index-3.js"><!----></script>
<script type="text/javascript">
	    var _gaq = _gaq || [];
	    _gaq.push(['_setAccount', 'UA-17511903-1']);
	    
	    _gaq.push(['_setDomainName', '.openstack.org']);	        
</script>
<script type="text/javascript" src="../common/ga.js"><!----></script>
<script language="javascript" src="/js/common.js"></script>
<link rel="stylesheet" href="../common/css/googlecode.css">
<script src="../common/highlight.pack.js"></script>
</head>
<body>
<!----><script type="text/javascript"><!--
hljs.initHighlightingOnLoad();
HeaderName = 'Глава 0. Введение';
PrevRef = 'NeverMiss-aNewRelease.html';
UpRef = 'index.html';
NextRef = 'Ch01.html';//-->
</script>
<!----><script type="text/javascript" src="HeaderAndToolbar.js">
</script><script type="text/javascript"><!--
document.write(HeaderAndToolbar); //-->
</script>
<div id="content">
 <div class="part">
  <div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title">
   Глава 0. Введение</h1>
  </div></div></div>

  <div class="toc"><p><strong>Содержание</strong></p>
   <dl>
   <dt><span class="chapter"><a href="Ch00.html">0. Введение</a></span></dt>
   <dd><dl>
    <dt><span class="section"><a href="Ch00.html#What_is_ZFS">Что такое ZFS?</a></span></dt>
    <dt><span class="section"><a href="Ch00.html#ZFS_History">История ZFS</a></span></dt>
    <dt><span class="section"><a href="Ch00.html#Prerequisites">Необходимые условия</a></span></dt>
     <dd><dl>
      <dt><span class="section"><a href="Ch00.html#WhereToUseZFS">Где применять ZFS?</a></span></dt>
     </dl></dd>
    <dt><span class="section"><a href="Ch00.html#ZFS_Hardware">Аппаратура ZFS</a></span></dt>
     <dd><dl>
      <dt><span class="section"><a href="Ch00.html#RAM">Оперативная память</a></span></dt>
      <dt><span class="section"><a href="Ch00.html#RAID_Controllers">Контроллеры RAID</a></span></dt>
      <dt><span class="section"><a href="Ch00.html#SATAvsSASvsSSD">SATA против SAS против SSD</a></span></dt>
      <dt><span class="section"><a href="Ch00.html#Disk_Redundancy">Избыточность дисков</a></span></dt>
      <dt><span class="section"><a href="Ch00.html#Physical_Redundancy">Физическая избыточность</a></span></dt>
      <dt><span class="section"><a href="Ch00.html#Disk_Installation_and_Labeling">Установка дисков и их пометка</a></span></dt>
     </dl></dd>
    <dt><span class="section"><a href="Ch00.html#About_this_Book">Об этой книге</a></span></dt>
    <dt><span class="section"><a href="Ch00.html#Book_Overview">Обзор книги</a></span></dt>
   </dl></dd>
   </dl>
  </div>
   <p>Основная часть обучения нас системной администрации фокусируется на файловых системах. Файловая система компьютера очень сильно 
   влияет на его производительность и работу. За последние десятилетия нам приходилось восстанавливать системы целиком поскольку основная файловая система 
   была настроена неправильно или выбранная файловая система не подходила для выполнения своей задачи, или потому что тонкое 
   повреждение файловой системы распространилось по всем нашим файлам, а теперь мы не сможем доверять даже основным программам 
   уже установленной операционной системы. Любой, кто был системным администратором больше нескольких лет, знает как восстанавливать 
   файловые системы, перестраивать файловые системы, обходить ошибки из диапазона от досадных до почти смертельных, переставить диски 
   для поддержки ограничений файловой системы, и интенсивно проклинать файловые системы не менее чем на девяти языках.</p>
   <p>Некоторые из наиболее популярных современных файловых систем являются древними в масштабах науки вычислений. Мы избавляемся от
   оборудования поскольку что ему уже пять лет и оно слишком медленно для наших нагрузок, а затем размещаем файловую систему 30-летней давности 
   поверх замещенного оборудования. Даже более современные файловые системы, такие как extFS, UFS2 и NTFS используют в своей основе 
   старые идеи.</p>
   <p>Файловая система Z, или ZFS, появилась теперь чтобы изменить положение дел.</p>
  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="What_is_ZFS"> </a>Что такое ZFS?</h3>
   </div></div></div>
  </div>

  <div class="section">
   <p>ZFS это современная файловая система построенная вокруг основной идеи, заключающейся в том, что файловая система должна быть способной гарантировать 
   целостность данных. ZFS вычисляет контрольную сумму для всех частей данных на диске, следовательно она может определить тот факт, что 
   носитель хранения испытал ошибку или повреждение данных. Она выполняет аналогичные криптографические подписи для всех метаданных. 
   Когда - а почему бы и нет - применяемое оборудование испытывает проблемы или просто отказы, ZFS осознаёт, что извлекаемые ею данные 
   не соответствует своим записям и может принять меры. ZFS даже способна автоматически исправлять обнаруженные ошибки! ZFS отказывается 
   обрабатывать данные, если узнаёт об их повреждении.</p>
   <p>Разработчики файловых систем имели подобные идеи 30 лет назад, однако оборудование того времени не могло выполнять такой объем 
   проверок ошибок при приемлемой производительности. Создатели ZFS ознакомились с текущем состоянием оборудования, с 
   тенденциями его развития, и решили, что ZFS сможет в полной мере воспользоваться преимуществами современного оборудования. В результате 
   файловая система не только становится более надежной по сравнению с традиционными файловыми системами, но и зачастую быстрее.</p>
   <p>Сегодня кажется, что традиционные файловые системы были написаны с &quot;достаточно приемлемой для текущего времени&quot; философией. 
   Многие файловые системы страдают от произвольных ограничений на размер которых хватило на пять лет, или десять, или даже 20, 
   но в конечном итоге нам требуются их переписывание и переработка. Многие старые файловые системы не могут справляться с разделами 
   больше двух гигабайт, что в наши дни даже меньше, чем обычный флэш-диск который вы получаете бесплатно прилагаемым к открывашке для бутылок. 
   (И в самом деле, вы выбрали его именно потому, что вам была нужна открывашка бутылок.) Но в начале 1980-х, когда впервые была создана 
   UFS, два гигабайта был смехотворно большим объёмом хранения, причём оно стоило бы многие миллионы долларов. Файловые системы подобные FAT 
   нужны были для эффективного использования пространства на 360кб дискетах. UFS была &quot;достаточно хороша для того времени&quot;, а 
   также некоторое время впоследствии.</p>
   <p>ZFS осознанно разрабатывалась чтобы оставаться актуальной в обозримом будущем и даже дольше. Многие новые файловые системы используют 
   внутри себя 64-битные идентификаторы и индексы, а следовательно они будут использоваться без изменения в течение последующих десяти или 
   20 лет. ZFS применяет внутри себя 128-битные идентификаторы, предоставляя достаточно емкости для работы с системами хранения в течение 
   последующих нескольких тысячелетий. Компьютер Enterprise в <span class="emphasis"><em>Star Trek</em></span>, скорее всего, работает с ZFS. 
   Будущие системные администраторы, которым придется иметь дело с дисками, разделами и файлами, превосходящими встроенные в ZFS 
   ограничения будут путать нас в истории с пещерными людьми и первыми межзвездными путешественниками.</p>
   <p>Строго говоря, ZFS не просто файловая система. Она является сочетанием файловой системы и менеджера томов. Сочетание этих двух 
   функциональностей в одном наборе программного обеспечения накладывает определенные ограничения, о которых мы поговорим позже - 
   однако оно также позволяет делать возможными и некоторые очень интересные вещи. Будучи информированной о точном местоположении данных на 
   диске, ZFS может оптимально организовывать файлы и чередующиеся области повсеместно, сверху донизу. ZFS может использовать вторичные быстрые 
   хранилища в качестве кэшей специального назначения, что дополнительно увеличивает производительность.</p>
   <p><span class="emphasis"><em>Мастерство FreeBSD: ZFS {основы}</em></span> проведет вас сквозь то, что вы должны знать в своей работе с 
   современной, высокопроизводительной, перспективной файловой системой.</p>
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ZFS_History"> </a>История ZFS</h3>
   </div></div></div>
   <p>Мэтт Аренс и Джефф Бонвик создали ZFS для операционной системы Sun Microsystems Solaris&reg;. В то время как Sun продавала системы 
   любых размеров, её основное внимание было сосредоточено на серверном оборудовании высокого класса. Оборудование Sun продвигало наиболее 
   крупных базы данных в мире. Sun предложил исходный код ZFS всему миру под своей лицензией общего развития и распространения 
   (CDDL, Common Development and Distribution License). Люди начали портировать ZFS на другие операционные системы, в том числе на FreeBSD, 
   а также совместо содействовать изменениям Sun.</p>
   <p>Затем Oracle приобрела Sun Microsystems. Хотя Oracle имеет некоторое программное обеспечение с открытым исходным кодом, например MySQL, 
   большинство его программного обеспечения является патентованным. Oracle перенесла развитие ZFS полностью в свой дом и прекратила 
   предоставление исходного кода под любой лицензией с открытым исходным кодом.</p>
   <p>Однако исходный код ZFS уже был общедоступным, и в соответствии с условиями лицензирования CDDL, Oracle не может запретить пользователям 
   ее использование. Различные проекты с открытым исходным кодом развернули свои собственные усилия в области развития ZFS.</p>
   <p>Сегодня проект OpenZFS (<a class="link" href="http://open-zfs.org" target="_top">http://open-zfs.org</a>) является основным 
   координатором версии ZFS с открытым исходным кодом. OpenZFS объединяет разработчиков ZFS из многих компаний и операционных систем, 
   в том числе Linux, OS X, Illumos и FreeBSD. Мэтт Аренс ведет этот проект.</p>
   <p>В отличие от остальных, ZFS FreeBSD имеет ограничительное лицензирование. CDDL ограничивает чью- либо способность 
   регистрации патентов судебным разбирательством, а обратный вклад в ZFS автоматически помещаются под юрисдикцию CDDL. 
   Во FreeBSD 2й пункт лицензии BSD не позволяет никому использовать код ни для чего, в том числе патентные иски. Однако CDDL разрешает 
   повторное применение, распространение и изменение кода, следовательно код может использоваться кем угодно в любой общей 
   корпоративной среде. Если вы хотите брать за основу продукта ZFS или включать ZFS в другой продукт, все- таки, проконсультируйтесь 
   с адвокатом.</p>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Prerequisites"> </a>Необходимые условия</h3>
   </div></div></div>
   <p>Эта книга написана для системных администраторов, интересующихся ZFS. Мы предполагаем, что вы знакомы с основами FreeBSD, включая 
   установку, настройку пользователей и управление хранилищами на основе GEOM. Вы должны знать что такое &quot;поставщик услуг&quot; и 
   почему мы применяем этот термин. Если вы не уверены в своих навыках, вы можете выбрать книгу подобную 
   <a class="link" href="http://www.amazon.com" target="_top">Absolute FreeBSD</a> (No Starch Press, 2007) или любую другую книгу с заголовком 
   <a class="link" href="https://www.tiltedwindmillpress.com" target="_top">FreeBSD Mastery</a> чтобы пополнить свои знания или 
   проконсультируйтесь с доступной в сети документации или страницами man.</p>
   <p>Если вы используете OpenZFS с операционной системой отличной от FreeBSD, эта книга предлагает охапку практических знаний и опыта 
   ZFS, которым вы можете воспользоваться. Вам придется игнорировать специфичные для FreeBSD материалы, но вы узнаете как оптимизировать ZFS 
   и управлять ею.</p>
   <p>Мы не проверял эту книгу на Oracle ZFS. Oracle провела выбрала для своей ZFS с закрытым исходным кодом собственное направление, и 
   вам на самом деле лучше читать официальную документацию Oracle, если вы должны работать с Oracle Solaris.</p>
   <p>Вам действительно нужно кое-что знать о технологиях дисков. FreeBSD ZFS может работать поверх любого поставщика GEOM, однако работа 
   на неподготовленных дисках предлагает определенные преимущества. Работа ZFS с RAID хранилищем ликвидирует эти преимущества. Вы должны 
   быть в состоянии прихлопнуть работу контроллера RAID со связкой дисков.</p>
   <p>Вам также следует иметь тестовую машину для разминки с ZFS. Не приступайте к немедленной миграции вашего основного сервера базы данных 
   на ZFS после приобретения данной книги! Установите ZFS на тестовой, следовательно, менее критичной машине. Пробуйте функциональность 
   ZFS пока вы не получите полную уверенность, что вы можете настроить ZFS наилучшим образом для поддержки целей вашей системы. Хотя ZFS
   быстрая, никакая файловая система не способна выдержать, чтобы системный администратор мог настроить ее на некорректную работу.</p>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="WhereToUseZFS"> 
			</a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Где применять ZFS?</span></h4>
    </div></div></div>
    <p>Вы можете применять ZFS где угодно, однако в некоторых случаях она не будет работать лучшим образом.</p>
    <p>ZFS может не быть лучшим выбором для определенных систем виртуализации. Мы применяли не одну систему виртуализации Linux 
	на основе KVM, которые задыхались на файловых системах ZFS, и не будем шокированы увидеть, что и другие системы будут иметь 
	подобные проблемы. Функциональность, подобная миграции между хостами и восстановлению из резервных копий на базе образов, 
	может быть проблематичными. Вы захотите провести полное тестирование ZFS с вашей системой виртуализации перед ее 
	применением там. Лукас развернул ZFS на таких системах, обратите внимание, однако он применял альтернативные стратегии 
	резервного копирования и миграции.</p>
    <p>ZFS написана для современного оборудования. Она ожидает, что у вас есть, по крайней мере, несколько гигабайт оперативной памяти. 
	Встроенные системы наподобие Raspberry Pi лучше подходят для традиционных файловых систем наподобие UFS2.</p>
    <p>Определенные сверхинтенсивные рабочие нагрузки на определенных аппаратных средствах лучше выполняются на UFS2, нежели на ZFS, 
	в особенности, если ваши диски применяют действительные 512-байтовые блоки. Если вы желаете прочистить нос своей базе данных, 
	сопоставьте производительность и на UFS2, и на ZFS.</p>
   </div>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ZFS_Hardware"> </a>Аппаратура ZFS</h3>
   </div></div></div>
   <p>Многие люди рекомендуют высококлассное оборудование для ZFS. Мы тоже любим высококлассное оборудование. Это ништяк.
   Но ZFS прекрасно работает на общедоступном оборудование, причем настолько долго, насколько вы осознаете ограничения 
   аппаратных средств. Большая часть документации ZFS, которую вы найдете в интернете, включает в себя рекомендации, 
   которые не применимы к современным ZFS, или не относятся к FreeBSD.</p>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="RAM"> 
			</a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Оперативная память</span></h4>
    </div></div></div>
    <p>Не удивительно, что документация Sun говорит, что вам необходима оперативная память с контролем четности (ECC RAM) для 
	надлежащего применения ZFS. Sun продает сервера профессионального уровня. Однако, согласно Мэтту Аренсу, &quot;ZFS в системах без 
	ECC ничуть не опаснее, чем любая другая файловая система без ECC&quot;. Встроенная в ZFS коррекция ошибок компенсирует 
	большинство ошибок, производимых не оперативной памятью.</p>
    <p>Общая аргументация в пользу ECC RAM, конечно, остается в силе. Машина с не-ECC памятью может испытывать повреждения памяти, 
	и некоторые из этих ошибок, вполне возможно, доберутся до диска. Тем не менее, это будет происходить независимо от используемой вами файловой 
	системы, а контрольные суммы ZFS дают надежду обнаружения подобной проблемы. Если вы выполняете службу высокой доступности, 
	вы хотите ECC для всего оборудования по обычным причинам. Но ваш ноутбук или сервер ZFS для домашних фильмов будет работать 
	нормально с обычной оперативной памятью.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="RAID_Controllers"> 
			</a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Контроллеры RAID</span></h4>
    </div></div></div>
    <p>Не используйте аппаратный контроллер RAID. Никогда. Выполнение ZFS поверх аппаратного RAID устройства создает конфигурации со всеми 
	недостатками RAID и со всеми недостатками ZFS. Применяйте адаптеры шины хоста (HBA, host bus adapter) без RAID для вашего контроллера 
	дисков.</p>
    <p>Все RAID являются программными. Ваш аппаратный контроллер RAID использует настраиваемую операционную систему для выполнения задач 
	RAID и при этом затеняет оборудование от операционной системы. Это еще имело смысл в первые дни широкого применения коммерческих 
	вычислений, когда потребитель операционных систем не доверял управляемым системам хранения. Проведите три секунды наблюдения за 
	работой программного обеспечения RAID на уровне операционной системы под Windows 3.1, и вы поймете, почему аппаратный RAID стал 
	настолько повсеместным.</p>
    <p>Наши операционные системы стали лучше. Наше оборудование стало в миллиарды раз мощнее. Среда изменилась.</p>
    <p>ZFS предназначена для прямого доступа к оборудованию. Она намеренно сохраняет критические метаданные на нескольких дисках. 
	Она наблюдает за этими дисками на предмет наличия ошибок, и принимает решения на основе этих ошибок. Аппаратное RAID-устройство 
	скрывает все это тревожные подробности от операционной системы, исключая возможность ZFS к самовосстановлению. Аппаратный RAID 
	не представляет конкурентных возможностей.</p>
    <p>Реконструкция массива ZFS намного быстрее реконструкции массива RAID благодаря интеграции избыточности ZFS с файловой системой. 
	Если вы управляете избыточностью при помощи аппаратного RAID, вы теряете эту скорость.</p>
    <p>Многие контроллеры RAID, однако, не позволяют использовать диски без некоего вида RAID. Даже если вы настраиваете ваш контроллер 
	на работу c &quot;простой пачкой дисков&quot; (JBOD, just a bunch of disks), такой контроллер на практике форматирует каждый диск 
	как отдельный диск RAID-0. Это маскирует определенную информацию от операционной системы, например, размер блока и 
	большое число ошибок диска. Что еще хуже, используемые с таким контроллером диски читаются только контроллерами этого 
	производителя - а иногда только с этой моделью контроллера! Применение такого RAID контроллера для ZFS означает, что вы не сможете 
	перемещать такие жесткие диски на другую машину без их переформатирования, пока не появится новая коробка, имеющая в точности такую 
	же плату RAID. Это устраняет всякую переносимость пулов ZFS.</p>
    <p>Некоторые аппаратные платы RAID допускают перезапись встроенного программного обеспечения, переделывающего их в контроллер JBOD.
	Плохая флеш-память может превратить вашу RAID плату в кирпич. Если больше никто не будет опять использовать RAID, мы можем рискнуть.</p>
    <p>Если вы вынесли приговор использовать аппаратный RAID, возможно, вы были очень плохим человеком в предыдущей жизни, 
	представьте себе операционную систему с отдельными дисками. Если контроллер RAID настаивает на форматировании каждого диска в качестве 
	RAID-0, вы застряли. Отключите режим &quot;ответа&quot; (write back) в контроллере; в противном случае кэш записи контроллера может 
	повредить вашу файловую систему. Смиритесь с увеличением сложности, снижением производительности и дополнительным риском. Убедитесь, 
	что вы задокументировали все это по электронной почте системе управления, поэтому, когда произойдет неизбежный отказ, вы получите 
	крошечное удовольствие, говоря: &quot;<a class="link" href="http://www.youtube.com/watch?v=HTY8zMALZP0" target="_top">А я предупреждал</a>&quot; 
	чтобы компенсировать головную боль от восстановления из резервной копии.</p>
    <p>Адаптеры шины хоста (HBA) намного дешевле чем RAID контроллеры - не только в денежном выражении, но и во временном. Используйте их.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="SATAvsSASvsSSD"> 
			</a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">SATA против SAS против SSD</span></h4>
    </div></div></div>
    <p>Устройства хранения данных поставляются с {интерфейсами} различного типа. ZFS может использовать SAS диски, SATA диски, сменные вращающиеся диски, 
	SSD устройства или любые поддерживаемые операционной системой носители информации.</p>
    <p>Это не означает, что диски являются эквивалентными. Диски SAS, как правило, могут выдерживать гораздо дольше ту же нагрузку чем SATA диски. 
	Флэш-диски являются гораздо более быстрыми, чем любой вид шпиндельных дисков. ZFS может хранить данные на любом из этих устройств. Основывайте 
	свой выбор дискового оборудования на потребностях вашей организации, а не на ZFS.</p>
    <p>ZFS может осуществлять специальное применение сверх- быстрых хранилищ для кэширования чтения и записи. Если у вас есть возможность добавить 
	пару твердотельных дисков в ваш массив хранения на базе SAS или до SATA, вы можете значительно ускорить производительность ZFS.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Disk_Redundancy"> 
			</a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Избыточность дисков</span></h4>
    </div></div></div>
    <p>Одновременная утрата нескольких дисков в массив хранения не редкость. Перепад напряжения может повредить сразу несколько дисков. Интенсивное 
	восстановление массива создает дополнительную нагрузку на оставшиеся диски. С одной из сторон шкафа может накапливаться тепло. ZFS поддерживает 
	множество сценариев резервирования именно для подобных случаев.</p>
    <p>Если вы приобретаете большую партию одинаковых дисков, они могут бы произведены в один и тот же день или в той же серии. Неудачный день на 
	заводе может сильно ужалить вас. К сожалению, розничные продавцы дисков не могут отгружать вам диски, сделанные в разные дни или из разных 
	партий {<span class="emphasis"><em>Прим. пер.: с этим можно оспорить - за Ваши деньги- любой каприз!</em></span>}. Лучшее, что вы можете сделать, 
	это иметь в каждом массиве произведенные различными производителями диски. {<span class="emphasis"><em>Прим. пер.: а вот с этим утверждением 
	<span class="term"><strong class="userinput">совсем никак нельзя согласиться</strong></span>! Диски различных производителей отличаются по 
	производительности, емкости, временам доступа и задержек, размерам кэшей и т.п. Во-первых: вы теряете преимущества самых производительных 
	устройств (<a class="link" href="https://parallel.ru/sites/default/files/info/parallel/voevodin/lec4.pdf" target="_top">1й закон Амдала</a> 
	в трактовке В.В.Воеводина: &quot;Производительность вычислительной системы, состоящей из связанных между собой устройств, в общем случае определяется 
	самым непроизводительным своим устройством&quot;, В.В.Воеводин. Вычислительная математика и структура алгоритмов. М.: Изд-во МГУ, 2006.-112с. 
	ISBN 5-211-05310-9), во- вторых вы осложняете себе сопровождение. Можно продолжить список, но и этого вполне достаточно.</em></span>}</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Physical_Redundancy"> 
			</a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Физическая избыточность</span></h4>
    </div></div></div>
    <p>FreeBSD поддерживает хранение с множеством путей, делая возможным преодоление многих проблем аппаратных средств. Изменение 
	компоновки вашего оборудования может повысить доступность и надежность системы. Если у вас есть два внешних дисковых массива, то допустимо 
	использование дисков из каждого массива в зеркальной паре. Таким образом, если дисковый электропитание одного массива отключается, 
	каждое зеркало все еще  имеет один активный диск. Когда восстанавливается отказавший  массив, зеркало автоматически восстановится. Поскольку 
	это является специализированным оборудованием, мы обсудим решения с множественностью путей (multipath) в в книге Мастерство FreeBSD: 
	Расширенный ZFS.</p>
    <p>Осмотрите на ваше оборудования перед установкой. Рассмотрим возможности отказов и как соответствующее размещение ваших комплектующих 
	может предотвратить простои.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Disk_Installation_and_Labeling"> 
			</a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Установка дисков и их пометка</span></h4>
    </div></div></div>
    <p>Нет, не используйте машинку для ярлычков и расклейки небольших наклеек на все жесткие диски. Клей на подобные вещи никогда не прилипает 
	(хотя вы должны физически помечать свои диски). FreeBSD поддерживает меток GUID таблицы разделов (GPT, GUID Partition Tables: 
	GUID = Globally Unique ID, глобально уникальный идентификатор), позволяя размещать произвольные логические маркеры на любоом жестком диске 
	или разделе. Если устройство хранения испытывает проблемы, FreeBSD объявляет об этой проблеме и идентифицирует проблемный блока по имени 
	устройства или узла устройства. Хотя это прекрасно, знать что диск <span class="term"><code>/dev/da239</code></span> испытывает проблему, 
	но вам необходимо отследить обратный путь к физическому устройству. Многие пользователи ZFS имеют машины с большим количеством жестких дисков, 
	что усугубляет проблему.</p>
    <p>Инструменты FreeBSD позволяют получить порядковый номер отказавшего диска. Однако, в зависимости от вашего оборудования, вам, возможно, 
	придется физически исследовать каждый диск для определения его серийный номер. Это обычно включает в себя либо вскрытие корпуса, 
	либо вынимание отдельных дисков из дискового массива. Это утомительно, неприятно, и чаще прерывает обслуживание.</p>
    <p>Если вы выполняете подготовку во время установки, вы можете установить точку отсчета прямо на неисправном диске - даже если диск 
	находится на удаленном объекте. Джуд работает с очень большим количеством плотных массивов хранения, расположенных по всему миру, 
	и использует эту схему, чтобы удерживаться от перенасыщенностью обслуживания жестких диска.</p>
    <p>Предложите схему именования и нумерация ваших массивов хранения данных. Многие массивы хранения данных имеют стандартную схему именования, 
	часто печатаемую на оборудовании. Если ваше оборудование уже имеет перенумерованные корпуса, то используется эта нумерация. В противном случае, 
	предлагаются простые правила, наподобие &quot;полка 0 всегда сверху, а диск 0 всегда слева&quot;. Вы можете использовать префикс &quot;f&quot; 
	для фронтальной части и &quot;b&quot; для тыловой, или что-то еще понятное вам.</p>
    <p>Обратите внимание на серийный номер каждого уже установленного в  вашем массиве диска. Фактически маркируйте каждый лоток диска после его 
	установки физическим расположением и серийным номером. Да, это утомительно, но вам в конечном счете нужна эта информация. Вы можете выполнить 
	эту работу в тишине и покое в заданном вами темпе, или вы можете безрассудно ухватиться в нее во время искусственно затянутого и необоснованного 
	стрессового отключения.</p>
    <p>Теперь либо установите FreeBSD или загрузите live media {загружаемый носитель, не требующий установки на диск}. Используйте 
	<span class="term"><code>camcontrol devlist</code></span> для получения списка всех ваших устройств хранения, а затем запустите 
	<span class="term"><code>diskinfo -v</code></span> на каждом узле устройства хранения для получения его серийного номера. (Вы также 
	можете извлечь серийные номера посредством <span class="term"><code>camcontrol(8)</code></span>.) Это сообщит вам что, скажем, 
	диск <span class="term"><code>/dev/da0</code></span> на самом деле диск 3 в полке 4.</p>
    <p>Теперь у вас есть список узлов устройств и связанные с ними серийные номера, а также список физического местоположения и ​​серийных номеров. 
	Приведите их в соответствие друг с другом, а затем воспользуйтесь метками GPT для закрепления местоположения и серийного номера используемого 
	вами раздела диска. (Ознакомьтесь с документацией по FreeBSD или с книгой 
	<a class="link" href="https://www.tiltedwindmillpress.com/?product=freebsd-mastery-storage-essentials" target="_top">Мастерство FreeBSD: 
	необходимые составляющие систем хранения</a> для получения подробной информации о метках GPT). GPT метки имеют максимальную длину 15 символов, 
	так что вам, возможно, придется обрезать длинные серийные номера. В большинстве серийных номеров последние цифры более уникальны, так что 
	обрезайте начало.</p>
    <p>В сочетании диск 9 в полке 2 с серийным номером WD-WCAW36477223 можно получить метку наподобие 
	<span class="term"><code>/dev/gpt/s2d9-AW36477223</code></span>.</p>
    <p>Вы хотите чтобы ваша система использовала эти метки, и только их. Отключите GPTID и идентификационные метки дисков в системе. Это позволит 
	избежать путаницу в последствии.</p>
    <p>При подобной установке при возникновении аппаратного сбоя FreeBSD теперь сможет вам сообщить, что третий диск на полке 4, серийный номер 
	такой-то и такой-то, плохой. Обладая данной информацией, даже самый младший технический специалист у вашего поставщика услуг размещения
	(colocation provider) должен быть в состоянии вынуть правильный диск. (Вероятно, он его испортит, потому что именно это делают младшие 
	специалисты. Но дайте бедному парню выстрелить.) Попросите технических специалистов выдать вам серийные номера заменяемых дисков перед их 
	установкой, таким образом вы можете создать правильные метки.</p>
    <p>Упреждающее планирование делает простои гораздо менее травмирующими. Мы настоятельно рекомендуем выполнять его.</p>
   </div>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="About_this_Book"> </a>Об этой книге</h3>
   </div></div></div>
   <p>Эта книга предназначена тем, кто управляет файловыми системами ZFS или кому любопытно то, как  выглядит современная высокопроизводительная 
   файловая система. Хотя мы и сосредотачиваем основное внимание на ZFS во FreeBSD, общая информация по ZFS применима к любой платформе, 
   выполняющей OpenZFS. Некоторые разделы этой книги, возможно, применимы и к другим реализациям, например Oracle ZFS, но вы не можете допускать, 
   что эта книга применима к таким другим реализациям.</p>
   <p>Мы действительно хотели написать единую книгу FreeBSD OpenZFS, но ограничения в выбранных платформах публикации сделали это непрактичным. 
   <span class="emphasis"><em>Мастерство FreeBSD: ZFS</em></span> охватывает повседневное применение ZFS. Следующая книга, 
   <span class="emphasis"><em>Мастерство FreeBSD: Профессиональный ZFS</em></span> (FreeBSD Mastery: Advanced ZFS), охватывает репликации в 
   режиме реального времени, настройку производительности, а также другие темы, требующие более глубокого понимания ZFS. Вторая книга предполагает, 
   однако, что вы понимаете все, что изложено в данной книге.</p>
   <p>OpenZFS непрерывно развивается. Эта книга представляет собой статичный объект. Более того, книга, которая охватывала бы всю 
   функциональность OpenZFS, должна бы была иметь размер печатной версии телефонной книги Манхэттена. (Смотрите: однажды некая телефонная компания 
   напечатала огромные книги, которые перечисляли всех имеющих телефоны и их номера телефонов. Нет, телефоны не менялись достаточно часто, поскольку 
   они все были стационарными. Но потом динозавры сломали все телефонные линии, а мы перешли к сотовой связи). данные книги пытаются предложить то, 
   что должно знать подавляющее большинство администраторов для поддержки удовлетворительной работы ZFS. Если вы ищете выходящую за рамки 
   нашего обсуждения функциональность или у ваc имеется некий специальный крайний случай не охваченный нами, безусловно, сверьтесь со справочными 
   страницами, онлайн документацей OpenZFS, а также архивами почтовых списков и форумами FreeBSD.</p>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Book_Overview"> </a>Обзор книги</h3>
   </div></div></div>
   <p><a class="link" href="Ch00.html" target="_top">Глава 0</a> является данным введением.</p>
   <p><a class="link" href="Ch01.html" target="_top">Глава 1, Представление ZFS</a>, даёт вам обзор глазами <p><a class="link" 
   href="https://ru.wikipedia.org/wiki/Птеранодон" target="_top">птеродона</a> комплекта программного обеспечения ZFS. Вы узнаете как 
   просматривать файловые системы ZFS и пулы данных, а также поймете как большие части ZFS стыкуются друг с другом.</p>
   <p><a class="link" href="Ch02.html" target="_top">Глава 2, Виртуальные устройства</a>, проведет вас по схемам физической избыточности ZFS.
   ZFS поддерживает традиционные зеркалированные и объединенные диски, но также предлагает и свои собственные, основанные на избыточности 
   расширенными контрольными суммами RAID-Z.</p>
   <p><a class="link" href="Ch03.html" target="_top">Глава 3, Пулы</a>, обсуждает пулы хранения ZFS. Вы научитесь собирать виртуальные устройства 
   в пулы, проверять пулы, а также управлять и опрашивать ваши пулы хранения.</p>
   <p><a class="link" href="Ch04.html" target="_top">Глава 4, Наборы данных ZFS</a>, проведет вас через то, что приверженцы традициям называют 
   файловыми системами. За исключением того, что ZFS не является действительной файловой системой. Да, мы помещаем файлы в наборы данных, однако 
   наборы данных это нечто большее.</p>
   <p><a class="link" href="Ch05.html" target="_top">Глава 5, Восстановление {пулов} и реконструкция</a>, охватывает выполнение изменений в 
   пулах хранения. Вы можете расширять пулы хранения дополнительными дисками, восстанавливать отказавшие диски, а также выполнять тонкую 
   настройку пулов для поддержки новой функциональности.</p>
   <p><a class="link" href="Ch06.html" target="_top">Глава 6, Управление дисковым пространством</a>, покрывает одну из наиболее непонимаемых 
   частей использования ZFS. Почему ваш диск 1ТБ претендует на наличие свободными 87ТБ? Как вы резервируете пространство для некоторых 
   пользователей и ограничиваете других? Что по поводу наполнения дедупликации? Данная глава рассматривает это и многое другое.</p>
   <p><a class="link" href="Ch07.html" target="_top">Глава 7, Снимки и клоны</a>, обсуждает функциональность снимков ZFS. Вы можете создать 
   снимок в определенный момент времени и вернуться к нему позже.  Вы хотите получить существовавшую вчера копию файла? Снимки являются вашими 
   друзьями. Аналогично клоны позволяют дублировать файловую систему. Вы изучите и снимки, и клоны.</p>
   <p><a class="link" href="Ch08.html" target="_top">Глава 8, Установка на ZFS</a>, покрывает установку FreeBSD на ZFS. Установщик FreeBSD 
   может установить для вас систему на основе FreeBSD. Установщик постоянно улучшается, однако реальный мир намного сложнее чем того может 
   ожидать любая программа установки. Знание того как устанавливать операционную системы это точно путь, от которого вы получите пользу.</p>
   <p>Застегните ваши ремни безопасности и приготовьтесь к погружению в файловую систему для 21го века.</p>
  </div>
   
   
</div>

<!----><script type="text/javascript" src="FooterAndSidebar.js">
</script><script type="text/javascript"><!--</div id="content"> is inside next code
document.write(FooterAndSidebar);//-->
</script>

</body></html>