<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:exsl="http://exslt.org/common" xmlns:ng="http://docbook.org/docbook-ng" xmlns:fb="http://ogp.me/ns/fb#">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet"/>
<title>Глава 2. Виртуальные устройства - Мастерство FreeBSD: ZFS</title>
<meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"/>
<meta name="mavenGroupId" content="www.mdl.ru"/>
<meta name="mavenArtifactId" content="FreeBSDMasteryZFS"/>
<meta name="mavenVersionId" content="1.0.0"/>
<link rel="home" href="index.html" title="Мастерство FreeBSD: ZFS"/>
<link rel="up" href="index.html" title="Мастерство FreeBSD: ZFS"/>
<link rel="prev" href="Ch01.html" title="Глава 1. Представление ZFS"/>
<link rel="next" href="Ch03.html" title="Глава 3. Пулы"/>
<meta name="git-sha" content=""/>
<meta name="buildTime" content=""/>
<script type="text/javascript">
            //The id for tree cookie
            var treeCookieId = "treeview-openstack-operations-guide";
            var language = "en";
            var w = new Object();
            //Localization
            txt_filesfound = 'Results';
            txt_enter_at_least_1_char = "You must enter at least one character.";
            txt_browser_not_supported = "Please enable JavaScript.";
            txt_please_wait = "Please wait. Search in progress...";
            txt_results_for = "Results for: ";
</script>
<style type="text/css">
            input {
            margin-bottom: 5px;
            margin-top: 2px;
            }

            .folder {
            display: block;
            height: 22px;
            padding-left: 20px;
            background: transparent url(../common/jquery/treeview/images/folder.gif) 0 0px no-repeat;
            }
</style>
<link rel="shortcut icon" href="../MdlLogo.gif" type="image/gif"/>
<link rel="stylesheet" type="text/css" href="../common/css/positioning.css"/>
<link rel="stylesheet" type="text/css" href="../common/css/custom.css"/>
<link rel="canonical" href="http://onreader.mdl.ru/FreeBSDMasteryZFS/content/index.html"/>
<!--[if IE]>
	<link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
<![endif]-->
<link rel="stylesheet" type="text/css" href="../common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css"/>
<link rel="stylesheet" type="text/css" href="../common/jquery/treeview/jquery.treeview.css"/>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.0.min.js"><!----></script>
<script type="text/javascript" src="../common/jquery/jquery-ui-1.8.2.custom.min.js"><!----></script>
<script type="text/javascript" src="../common/jquery/jquery.cookie.js"><!----></script>
<script type="text/javascript" src="../common/jquery/treeview/jquery.treeview.min.js"><!----></script>
<link rel="stylesheet" type="text/css" href="http://cdn.jsdelivr.net/qtip2/2.2.0/jquery.qtip.min.css"/>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/qtip2/2.2.0/jquery.qtip.min.js">
<!--jQuery plugin for glossary popups. --></script><script type="text/javascript" src="search/htmlFileList.js"><!----></script>
<script type="text/javascript" src="search/htmlFileInfoList.js"><!----></script>
<script type="text/javascript" src="search/nwSearchFnt.js"><!----></script>
<script type="text/javascript" src="search/stemmers/en_stemmer.js">
<!--//make this scalable to other languages as well.--></script>
<script type="text/javascript" src="search/index-1.js"><!----></script>
<script type="text/javascript" src="search/index-2.js"><!----></script>
<script type="text/javascript" src="search/index-3.js"><!----></script>
<script type="text/javascript">
	    var _gaq = _gaq || [];
	    _gaq.push(['_setAccount', 'UA-17511903-1']);
	    
	    _gaq.push(['_setDomainName', '.openstack.org']);	        
</script>
<script type="text/javascript" src="../common/ga.js"><!----></script>
<script language="javascript" src="/js/common.js"></script>
<link rel="stylesheet" href="../common/css/googlecode.css">
<script src="../common/highlight.pack.js"></script>
</head>
<body>
<!----><script type="text/javascript"><!--
hljs.initHighlightingOnLoad();
HeaderName = 'Глава 2. Виртуальные устройства';
PrevRef = 'Ch01.html';
UpRef = 'index.html';
NextRef = 'Ch03.html';//-->
</script>
<!----><script type="text/javascript" src="HeaderAndToolbar.js">
</script><script type="text/javascript"><!--
document.write(HeaderAndToolbar); //-->
</script>
<div id="content">
 <div class="part">
  <div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title">
   Глава 2. Виртуальные устройства</h1>
  </div></div></div>

  <div class="toc"><p><strong>Содержание</strong></p>
   <dl>
   <dt><span class="chapter"><a href="Ch02.html">2. Виртуальные устройства</a></span></dt>
   <dd><dl>
	<dt><span class="section"><a href="Ch02.html#Disks">Диски и другие носители информации</a></span></dt>
     <dd><dl>
      <dt><span class="section"><a href="Ch02.html#Raw">Хранилище на &quot;сырых&quot; дисках</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#Partition">Хранилище на разделах</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#GEOM">Хранилище на GEOM устройствах</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#File-Backed">Хранилище на основе файлов</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#Providers_vsDisks">Поставщики против дисков</a></span></dt>
     </dl></dd>
	<dt><span class="section"><a href="Ch02.html#VDEV">VDEV: виртуальные устройства</a></span></dt>
	<dt><span class="section"><a href="Ch02.html#VDEV_Redundancy">Избыточность VDEV</a></span></dt>
     <dd><dl>
      <dt><span class="section"><a href="Ch02.html#Stripe">Область чередования (1 поставщик)</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#Mirrors">Зеркала (2+ поставщики)</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#RAID-Z1">RAID-Z1 (3+ поставщики)</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#RAID-Z2">RAID-Z2 (4+ поставщики)</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#RAID-Z3">RAID-Z3 (5+ поставщики)</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#RAID-Z">Дисковые конфигурации RAID-Z</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#Rule_of_2s">Правило RAID-Z кратного 2</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#RepairingVDEV">Восстановление VDEV</a></span></dt>
     </dl></dd>
	<dt><span class="section"><a href="Ch02.html#RAID-ZvsRAID">RAID-Z против обычного RAID</a></span></dt>
	<dt><span class="section"><a href="Ch02.html#Special_VDEVs">Специальные VDEV</a></span></dt>
     <dd><dl>
      <dt><span class="section"><a href="Ch02.html#SLOG_ZIL">Выделенный журнал намерений (SLOG, ZIL)</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#L2ARC">Kэш (L2ARC)</a></span></dt>
	 </dl></dd>
	<dt><span class="section"><a href="Ch02.html#VDEVs_Affect_Performance">Как VDEV воздействуют на производительность</a></span></dt>
     <dd><dl>
      <dt><span class="section"><a href="Ch02.html#One_Disk">Один диск</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#Two_Disks">Два диска</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#Three_Disks">Три диска</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#Four_or_Five_Disks">Четыре или пять дисков</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#Six_to_Twelve_Disks">От шести до двенадцати дисков</a></span></dt>
      <dt><span class="section"><a href="Ch02.html#Many_Disks">Много дисков</a></span></dt>
	 </dl></dd>
	</dl></dd>
   </dl>
  </div>
   <p>В данной главе мы будем вникать в то, как сделана колбаса. Это свинина - Я имею в виду диск. Диски являются физическим воплощением 
   хранения. Диски - зло. Они лгут о своих характеристиках и своем построении, они прячут ошибки и они отказывают самым
   неожиданным образом. ZFS предназначена для того, чтобы у вас не было страха что ваши диски находятся в тайном заговоре против вас.
   Да, ваши диски в заговоре против вас, однако ZFS разоблачает их предательство и приводит к его окончанию.</p>
   <p>Для наиболее эффективного применения с ZFS имеющихся у вас дисков вам потребуются основы понимания того, как операционная 
   система представляет диски ZFS и как ZFS упорядочивает данные на этих дисках.</p>
  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Disks"> </a>Диски и другие носители информации</h3>
   </div></div></div>
   <p>ZFS может работать с носителями информации, отличными от дисков. Все что является поставщиком для хранилища GEOM FreeBSD 
   может стать носителем хранения ZFS. {<span class="emphasis"><em>Прим. пер.: GEOM - модульная структурная система 
   преобразования запросов ввода- вывода, позволяющая создавать стеки из разных уровней обработки (посредством создания цепочки 
   &quot;потребителей&quot; и &quot;поставщиков&quot;. Веден во <a class="link" href="https://ru.wikipedia.org/wiki/FreeBSD#FreeBSD_5" 
   target="_top">FreeBSD 5</a>)</em></span>.} ZFS даже имеет поддержку для применения файлов в качестве основы хранения, 
   что действительно великолепно для целей тестирования, однако не предназначено для промышленного применения. ZFS может применять 
   любое блочное устройство для своего физического хранения, однако каждый тип имеет свои преимущества и недостатки.</p>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Raw"> 
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Хранилище на &quot;сырых&quot; дисках</span></h4>
    </div></div></div>
    <p>Применение всего физического диска целиком сокращает сложность. К тому же отсутствуют разделы о которых стоит беспокоиться, 
	а также отсутствуют какие бы то ни было программное обеспечение и настройки между ZFS и физическим диском. Однако недостатки 
	обычно перевешивают преимущества.</p>
    <p>Загрузка с диска требует чтобы диск имел начальный загрузчик. Начальный загрузчик может располагаться только на дисках с 
	разделами. У вас нет возможности загружаться с неподготовленного {&quot;сырого&quot;} диска. FreeBSD поддерживает полезные метки
	работающих дисков, однако эти метки живут внутри информации разделов.</p>
    <p>Хуже того, любые диски для замены должны быть точно того же размера, что и оригинальный диск или иметь больший размер. Не все 
	диски 6ТБ имеют одинаковый размер - диски различных производителей различаются на несколько мегабайт. Вы не заботитесь об этих 
	различиях при установке системы, однако они критичны при замене диска. Большинство каталогов не приводят данных о количестве 
	секторов на каждом диске, только его размер, так что поиск подходящей замены может занять несколько попыток. Замена диска, 
	который использует традиционные сектора 512 байт диском, который использует 4096 байт (4К, также известный как Advanced Format
	{AF, <span class="emphasis"><em>Прим. пер.: на самом деле все выпускаемые в настоящее время диски физически имеют сектора
	размера 4К, однако некоторые из них эмулируют сектора в 512 байт (512e), остальные имеют формат 4Kn. Хорошее объяснение AF и 
	возникающих проблем дает специалист IBM Илья Крутов в своем <a class="link" href="http://support.mdl.ru/GPFS.IBM/redp5119.html" 
	target="_top">Обзоре технологии Расширенного формата жестких дисков</a></em></span>}). Весьма вероятно, что первоначальный диск 
	имел число секторов не кратное 8. Благодаря специальной математике применяемой дисковыми драйверами новый диск может оказаться 
	на пару байт меньше старого диска, даже если он на пару байт больше.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Partition"> 
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Хранилище на разделах</span></h4>
    </div></div></div>
    <p>Вместо применения всего неподготовленного диска вы можете создать разделы диска и затем использовать один из разделов для 
	ZFS. Самым большим преимуществом этого будет то, что вы теперь можете грузиться с диска, который содержит раздел ZFS, создав 
	небольшой загрузочный раздел вместо требования отдельного загрузочного устройства. Применение разделов также позволяет вам 
	использовать часть дискового пространства для других целей, таких как неподготовленный раздел подкачки, другая файловая 
	система или просто оставление некого пространства для маневра в конце диска с тем, чтобы диск на замену не должен иметь 
	соответствующее число секторов. Разбиение на разделы также позволяет вам &quot;укоротить перемещения&quot; дисковых головок
	для увеличения производительности.</p>
    <p>Многие исходные руководства по администрированию Solaris ZFS рекомендовали применять разделы (или в терминах Solaris 
	<span class="term"><strong class="userinput"><code>slices</code></strong></span> - срезы) по причинам производительности.
	В Solaris применение раздела для файловой системы запрещает кэширование записи. Во FreeBSD запрет кэширования записи 
	полностью отделен от рабиения диска на разделы или файловые системы. FreeBSD дает полную производительность при применении 
	ZFS разделов.</p>
    <p>FreeBSD поддерживает ряд схем разбиения на разделы, однако настоятельно рекоменуетсЯ GPT. Более старая система разбиения 
	на разделы, MBR, ограничивает число первичных разделов четырьмя, в то время как GPT поддерживает до 128 разделов. 
	MBR может управлять дисками только до размера в 2ТБ, в то время как GPT может управлять до 8 ЗеттаБайт при дисках с 512- 
	байтовыми секторами и до 64 ЗеттаБайт  при 4K - секторных дисках. Книга <a class="link" 
	href="https://www.tiltedwindmillpress.com/?product=freebsd-mastery-storage-essentials" target="_top">FreeBSD Mastery: 
	Storage Essentials</a> описывает поддержку FreeBSD для обоих методов разбиения дисков. (Если вы храните ваши данные на 
	глиняных табличках , вы можете применять разделы bsdlabel(8))</p>
    <p>Недостатком применения разделов заключается в том, что вы можете потерять некую переносимость, предоставляемую ZFS. 
	Если вы перемещаете диски с одной системы в другую, система- получатель должна быть способна распознавать разделы диска.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="GEOM"> 
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Хранилище на GEOM устройствах</span></h4>
    </div></div></div>
    <p>ZFS также может использовать различные классы в качестве основы системы хранения. Они расположены между файловой системой 
	и физическими устройствами и выполняют различные функции. Классы GEOM предоставляют функциональные возможности такие, как 
	шифрование всего диска (GELI, GBDE), высокая доступность, метки множественные пути и подключаемые расписания. Класс GEOM 
	может быть создан на основе всего диска или поверх другого класса GEOM, такого как раздел, устройство с множеством путей 
	или закодированный диск.</p>
    <p>GELI (система шифрования FreeBSD) является лучшим способом достижения зашифрованного пула ZFS. GELI кодирует и декодирует 
	по мере их пропуска назад и вперед между ZFS и физическими дисками, тем самым не требуется от ZFS выполнять что- то отличное от 
	обычной работы. GELI поддерживает ряд различных алгоритмов шифрования, однако используемый по умолчанию AES-XTS предлагает 
	наилучшую производительность, в особенности с применением современных центральных процессоров, которые поддерживают новые 
	инструкции AES (AES-NI). С помощью этой особенности разгрузки аппаратуры, GELI может кодировать данные примерно со 
	скоростью 1ГБ/с, а декодировать даже еще быстрее, что означает, что добавление шифрования не уменьшает вашу 
	производительность даже при использовании SSD. GELI может также дополнительно выполнять аутентификацию данных (проверка 
	цеслостности), при сохранении с каждым сектором хэшированного кода аутентификации сообщений (HMAC, Hashed Message 
	Authentication Code). Она применяет такой HMAC для проверки целостности (данные не были подделаны) и аутентификации 
	(эти данные подписаны вами) данных. Если при чтении исходного сектора HMAC не подтверждает данные, возвращается ошибка. 
	По умолчанию функциональная особенность HMAC не включена и вероятно является излишней для ZFS, поскольку ZFS поддерживает 
	собственные контрольные суммы для каждого блока данных.</p>
    <p>Технология хранения высокой доступности (HAST, High Availability Storage Technology) является решением FreeBSD 
	распределенного хранилища. Она делает возможным зеркалировать блочные устройства между компьютерами поверх сетевой среды.
	Применение  HAST в качестве основы хранения для пула ZFS позволяет вам делать зеркало любого основного диска на другой 
	машине. Преимуществом HAST является то, он а выполняется в масштабе реального времени; блок не рассматривается записанным пока 
	он не записан на все хосты в кластере HAST. Репликации ZFS, с другой стороны, на периодической синхронизации снимков.
	Однако при использовании HAST вторая машина не может иметь импортированный или смонтированный пул в то же время, что и 
	первая машина. По сравнению с репликациями ZFS, при которых  вы можете иметь активный реплицированный пул (однако только в 
	режиме чтения) все время, HAST имеет смысл только в некоторых случаях.</p>
    <p>Метки GEOM предоставляют удобный способ прилагать значимые сведения к каждому диску или разделу. Существует много типов 
	меток, включающих стандартные, такие как идентификатор диска, gptid (идентификатор раздела), метки GPT и особенные для GEOM 
	метки (glabel). Лучший метод для пометки дисков описан в <a class="link" href="Ch00.html" target="_top">Главе 0</a>.</p>
    <p>GEOM также поддерживает множество путей для высокой доступности. Иногда умирают не только диски, но также и платы 
	контроллеров, объединительные платы или кабели. С применением множества путей промышленные диски, которые являются 
	&quot;двухпортовыми&quot; могут быть подключены к более чем одному HBA (контроллеру дисков без каких бы то ни было функций 
	RAID). Если каждый диск имеет пути к двум различным контроллерам хранения, он может пережить утрату одного из контроллеров.
	Однако, когда каждый диск подключен к двум различным контроллерам, операционная система видит каждый диск дважды, по разу через 
	каждый контроллер. Класс множества путей GEOM (multipath) позволяет вам записать метку на каждый диск, так что может быть 
	обнаружен последующий путь к тому же самому диску. Таким образом вы получает одно представление каждого диска, снабженного 
	множеством путей к этому диску через различные контроллеры. Мы обсудим множество путей в книге 
	<span class="term"><strong class="userinput"><code>FreeBSD Mastery: Advanced ZFS</code></strong></span>.</p>
    <p>Модуль расписаний GEOM делает возможным администратору описывать различные алгоритмы ввода/ вывода при попытке достичь 
	лучшей производительности. На момент написания, текущими доступными расписаниями являются &quot;as&quot;, простейшая форма 
	упреждающих расписаний (anticipatory scheduling) с только одной очередью и &quot;rr&quot;, упреждающее расписание с
	карусельным (round-robin) обслуживанием каждого клиента в очереди. Для получения дополнительных подробностей ознакомьтесь с 
	<span class="term"><code>gsched(8)</code></span>. Система GEOM делает относительно простым написание дополнительных модулей
	расписания для специфичных нагрузок.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="File-Backed"> 
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Хранилище на основе файлов</span></h4>
    </div></div></div>
    <p>Вы можете использовать виртуальный диск на основе файла в качестве устройства хранения ZFS. Хотя мы несомненно не 
	рекомендуем это для промышленного применения, диски на основе фала могут быть полезны для тестирования и экспериментов.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Providers_vsDisks"> 
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Поставщики против дисков</span></h4>
    </div></div></div>
    <p>&quot;Поставщик&quot; является техническим термином в FreeBSD. Поставщик хранения GEOM является вещью, который 
	предлагает хранилище данных. Это может быть диск. Это может быть класс GEOM, который преобразует хранилище каким-то 
	образом. Технически говоря, данная книга должна использовать слово поставщик (provider) вместо слова диск почти везде.
	Вы можете использовать любого поставщика GEOM как основу для ZFS. Проблема с этим состоит в том, что один физический 
	диск может предлагать нескольких различных поставщиков. Ваш пул может иметь несколько различных поставщиков, однако если они 
	все находятся на одном диске, вы должны просто пристрелить свою избыточность в вашей голове. (Гибкая система хранения 
	FreeBSD дает вам возможность делать глупые вещи. Бросьте!)</p>
    <p>Там, где эта книга обсуждает &quot;диски&quot;, мы имеем в виду &quot;некоторый вид поставщика поверх диска&quot;.
	Этот диск не должен быть целиком выделен ZFS - вы можете иметь раздел подкачки и раздел ZFS на одном диске и прекрасно 
	себя чувствовать. Однако вы не можете иметь два раздела ZFS на одном физическом диске, зеркалировать их и иметь 
	физическое резервирование.</p>
   </div>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="VDEV"> </a>VDEV: виртуальные устройства</h3>
   </div></div></div>
   <p>Виртуальное устройство, или VDEV, является логической единицей хранения ZFS. Каждый VDEV состоит из одного или более 
   поставщиков GEOM. ZFS поддерживает несколько различных типов VDEV, которые дифференцированы по типу резервирования,  
   который предлагает VDEV. Общий зеркалированный диск, в котором каждый диск содержит копию другого диска это один тип VDEV. 
   Простые диски, без избыточности являются другим типом VDEV. А ZFS, включающий в себя три различных вида сложных RAID 
   называется RAID-Z.</p>
   <p>Такие VDEV  организованы в пулы хранения, обсуждаемые в <a class="link" href="Ch03.html" target="_top">Главе 3</a>. 
   Фактические данные выходят на первое место, что охватывает <a class="link" href="Ch04.html" target="_top">Глава 4</a>.
   Однако организация ваших виртуальных устройств предписывает то, насколько пул производителен и как хорошо он противостоит 
   физическим повреждениям. Практически вся избыточность ZFS проистекает от виртуальных устройств.</p>
   <p>Пул хранения состоит из одного или более VDEV, причем данные пула распределяются по этим VDEV без избыточности. 
   (Вы можете добавить некоторую избыточность при помощи свойства 
   <span class="term"><strong class="userinput"><code>copies</code></strong></span>, как описано в 
   <a class="link" href="Ch04.html" target="_top">Главе 4</a>, однако это не обеспечивает защиты от общего отказа диска.)
   ZFS рассматривает VDEV как отдельную единицу, которая предоставляет пространство хранения. Пул хранения не может выдержать 
   потери VDEV, следовательно важно чтобы вы применяли VDEV c избыточностью или приняли заранее решение, что будет нормальной 
   потеря данных в этом пуле.</p>
   <p>Применение множества VDEV в пуле создает системы, аналогичные современным RAID массивам. Массив RAID-Z2 аналогичен RAID-6, 
   однако пул ZFS с двумя RAID-Z2 VDEV аналогичен RAID-60. Зеркальные VDEV выглядят как RAID-1, однако их группа аналогична 
   RAID-10. В обоих данных случаях ZFS разделяет данные по каждому VDEV без избыточности. Избыточность предоставляют независимые VDEV.</p>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="VDEV_Redundancy"> </a>Избыточность VDEV</h3>
   </div></div></div>
   <p>VDEV? который содержит более одного диска может применять ряд различных схем резервирования для обеспечения устойчивости к сбоям.
   Отдельный диск сидящий на всем ничего не может сделать в отношении своей избыточности. ZFS поддерживает использование зеркальных 
   дисков и различные массивы на основе контроля четности.</p>
   <p>Для самовосстановления ZFS применяет избыточность. VDEV без избыточности не может поддерживать самовосстановление. Вы можете 
   обойти это на уровне набора данных (применив свойство <span class="term"><strong class="userinput"><code>copies</code></strong></span>),
   тем не менее, избыточные VDEV поддерживают самовосстановление автоматически.</p>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Stripe">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Область чередования (1 поставщик)</span></h4>
    </div></div></div>
    <p>VDEV состоящий из отдельного диска называется чередующейся областью (полосой, <span class="term"><strong class="userinput"><code>stripe</code></strong></span>), 
	и оно не имеет резервирования. Как вы можете ожидать, утрата единого поставщика означает что все данные на диске пропадут. Пул 
	чередования содержит только отдельные диски.</p>
    <p>Пул ZFS чередует данные между всеми VDEV в пуле и полагается на то что VDEV обеспечивает резервирование. Если отказывает одно 
	устройство чередования, отказывает весь пул. Пропадают все хранимые в пуле данные. Это хорошо для рабочих разделов, однако если вы заботитесь 
	о своих данных, воспользуйтесь VDEV, который предлагает отказоустойчивость.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Mirrors">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Зеркала (2+ поставщики)</span></h4>
    </div></div></div>
    <p>Зеркалированные VDEV хранят полную копию всех данных для каждого диска. Вы можете потерять все, но только на одном диске поставщика 
	и все еще будете иметь свои данные доступными. В зеркале вы можете применять любое число дисков.</p>
    <p>Зеркала обеспечивают очень хорошие скорости случайного и последовательного чтения, поскольку данные могут считываться за рас со 
	всех доступных дисков. Скорость записи страдает, поскольку все данные должны быть записаны на все диски и операция не 
	завершена пока не закончена запись на самый медленный диск.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="RAID-Z1">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">RAID-Z1 (3+ поставщики)</span></h4>
    </div></div></div>
    <p>ZFS содержит три современных VDEV с резервированием в стиле RAID, называемые RAID-Z. RAID-Z1 напоминает RAID-5, но 
	включает в себя вычисление контрольной суммы для обеспечения целостности файлов. Имея одновременные функциональности 
	контрольных сумм и копирования-при-записи ZFS (<a class="link" href="Ch07.html" target="_top">Глава 7.</a>), RAID-Z гарантирует,
	что незавершенная запись не приведет к несогласованности файловой системы.</p>
    <p>RAID-Z разделяет данные и информацию контрольных сумм по всем дискам. Если поставщик в RAID-Z погибает или начинает выдавать 
	испорченные данные, RAID-Z использует информацию контрольных сумм для повторного вычисления утраченных данных. Вы могли бы 
	услышать, что RAID-Z использует поставщика для хранения информации контрольных сумм, однако не существует отдельного поставщика 
	контрольных сумм - роль контрольных сумм переходит от поставщика к поставщику, распределяя данные.</p>
    <p>VDEV RAID-Z1 может выдержать отказ каждого отдельного поставщика. Если второй поставщик отказывает до того как заменен 
	отказавший диск, все данные будут утрачены. Восстановление дискового массива из данных контрольных сумм может занимать 
	длительное время. Если вы используете большие диски, скажем, 2ТБ - существует большая вероятность того, что второй диск откажет 
	в процессе вашего восстановления первого диска. Для больших дисков вам вероятно следует рассмотреть RAID-Z2.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="RAID-Z2">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">RAID-Z2 (4+ поставщик)</span></h4>
    </div></div></div>
    <p>RAID-Z2 имеет сходство с RAID-Z1, но имеет две контрольные суммы на каждое VDEV. Как и RAID-6, RAID-Z2 позволяет 
	продолжать работу даже с двумя отказавшими поставщиками. Он слегка медленнее RAID-Z1, но позволяет вам быть несколько более 
	ленивыми при замене ваших дисков.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="RAID-Z3">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">RAID-Z3 (5+ поставщик)</span></h4>
    </div></div></div>
    <p>Наиболее параноидальная форма RAID-Z, RAID-Z3 применяет три диска с контрольными суммами на VDEV. Да, вы можете иметь три 
	отказавших диска в вашем дисковом массиве из пяти дисков. Это еще слегка медленнее, чем RAID-Z2. Отказ четвертого диска имеет 
	результатом полную потерю данных.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="RAID-Z">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Дисковые конфигурации RAID-Z</span></h4>
    </div></div></div>
    <p>Одна важная вещь, которую следует помнить при использовании любой версии RAID-Z заключается в том, что число поставщиков в 
	RAID-Z полностью фиксировано. Вы не можете добавлять диски в RAID-Z VDEV для его расширения. Вы можете расширить пул 
	добавлением VDEV, но вы не можете расширить VDEV добавлением дисков. Не существует планов добавления такой функциональности.</p>
    <p>Предположим, у вас есть хост, который может принимать 20 жестких дисков. Вы устанавливаете 12 дисков и используете их как 
	отдельный RAID-Z2, полагая что вы добавите еще дисков в свой пул позже по мере возникновения потребности в этом. Такие 
	добавленные новые диски должны будут пойти в отдельное RAID-Z2 VDEV.</p>
    <p>Более того, ваши VDEV будут несбалансированными. Ваш пул будет иметь одно VDEV с 12ю дисками и второе VDEV с 8ю дисками. 
	Одно будет медленнее другого. ZFS позволит вам принудить эти устройства к объединению в один пул, однако в действительности 
	это плохая идея.</p>
    <p>Планируйте заранее. Посмотрите на ваше физическое оборудование, число дисков, которое вы имеете для начала и то, как вы будете 
	расширять это хранилище. Наш пример сервера будет отличным с пулом, содержащим одно VDEV RAID-Z и полностью отдельный пул, 
	содержащий другие восемь дисков с любой удобной вам организацией. Не наступайте на свое горло еще до того как вы начали!</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Rule_of_2s">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Правило RAID-Z кратного 2</span></h4>
    </div></div></div>
    <p>Одна из наиболее часто обсуждаемых конфигураций состоит в наличии числа дисков данных равного кратному двум плюс число дисков 
	для хранения контрольных сумм, необходимое для данного уровня RAID-Z. То есть, это правило говорит, что RAID-Z1 должен 
	использовать 2n+1 дисков, или три, пять, семь, девять и так далее. RAID-Z2 должен применять 2n+2 дисков (четыре, шесть, восемь и 
	так далее), а RAID-Z3 должен иметь 2n+3 (пять, семь, девять и далее).</p>
    <p>Это правило оаботает - <span class="term"><strong class="userinput"><code>если и только если</code></strong></span> ваши 
	данные состоят из малых блоков с размером, который является степенью двойки. Другие множители, однако, создают гораздо бОльшую 
	разницу. Сжатие обычно рассматривается как более эффективное. Сжате ваших данных уменьшает в размере блоки, устраняя эту выгоду.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="RepairingVDEV">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Восстановление VDEV</span></h4>
    </div></div></div>
    <p>При отказе поставщика, относящегося в VDEV с резервированием, VDEV, к которому он относился, становится 
	&quot;деградировавшим&quot;. Деградировавшее VDEV все еще содержит все свои данные, но его производительность может понизиться.
	<a class="link" href="Ch05.html" target="_top">Глава 5</a> охватывает замену отказавших поставщиков.</p>
    <p>После того как поставщик заменен, система должна сохранить данные на новом поставщике. Зеркало делает это просто: 
	читает данные с оставшегося диска (дисков) и записывает их для обновления. Для RAID-Z должны вычисляться из контрольных сумм.</p>
    <p>Таким образом сочетание в ZFS RAID и файловой системы означает что ZFS знает какие блоки содержат данные, а какие свободны. 
	Вместо обязанности записывать все байты на новый диск, ZFS нужно записывать только те блоки, которые используются на самом деле.
	Обычные RAID контроллеры не имеют понимания или представления об уровне файловой системы, следовательно они не представляют 
	какое пространство используется, а какое свободно. Когда RAID контроллер заменяет диск, он должен скопировать все байты на 
	новый диск. Это означает, что поврежденный RAID-Z ZFS вернется к жизни гораздо быстрее, понижая вероятность одновременного 
	отказа, который мог бы вызвать потерю данных. Мы обсудим восстановление ZFS в <a class="link" href="Ch05.html" 
	target="_top">Главе 5</a>.</p>
   </div>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="RAID-ZvsRAID"> </a>RAID-Z против обычного RAID</h3>
   </div></div></div>
   <p>RAID-Z имеет ряд преимуществ по сравнению с традиционным RAID, однако основное проистекает из того факта, что ZFS является 
   администратором томов и файловой системой дополнительно к уровню резервирования дисков.</p>
   <p>В недавнем прошлом файловые системы могли работать только на одном диске. Если у вас было два диска, вам нужны были две 
   отдельные файловые системы. Традиционный RAID позволял объединять несколько дисков в один виртуальный диск, делая возможным 
   создание массива дисков выше 100МБ, или даже еще больше! Затем операционные системы поместили свои собственные файловые системы 
   поверх этого без какого бы то ни было понимания как будут разложены блоки на физические диски. В то же время RAID может 
   обеспечить отказоустойчивость. Учитывая существовавшие в то время аппаратные и программные ограничения, RAID казался хорошей 
   ставкой.</p>
   <p>Объединяя файловую системы и управление томами, ZFS может увидеть точно где расположены все данные и то, как 
   взаимодействуют уровни хранения и данных. Это позволяет ZFS принимать ряд важных решений, таких как обеспечение того, что 
   дополнительные копии важных данных, таких как блоки вторых экземпляров (ditto blocks, <a class="link" href="Ch03.html" 
   target="_top">Глава 3</a>), сохраняются на отдельных дисках. Не очень хорошая идея иметь две или три копии ваших важных данных 
   целиком на одном создающем основу поставщике хранения, который может быть уничтожен одним аппаратным отказом. ZFS заходит 
   настолько далеко, что помещает дублирующие блоки на соседние диски, поскольку статистически менее вероятно, что если два 
   диска откажут одновременно, то они будут соседями {<span class="emphasis"><em>Прим. пер.: спорное утверждение!</em></span>}.</p>
   <p>Обычные RAID могут от недостатка, называемого &quot;дырой записи&quot; (&quot;write hole&quot;), при котором операции в 
   два шага обрываются на полпути {<span class="emphasis"><em>нарушение атомарности</em></span>}. RAID 5 и 6 разбивают данные на куски, 
   которые будут записаны на все диски данных. Когда операция завершается, вычисляется блок контрольной суммы и сохраняется на диск 
   контрольных сумм. Если файловая система отказывает или отключается питание после того, как записаны данные, но до записи контрольной 
   суммы, диск завершается в неопределенном состоянии. Когда система возвращается, данные не соответствуют контрольной сумме. Такая же 
   вещь может случиться с зеркалированными дисками если один завершил обновление, а другой нет.</p>
   <p>Проблемы дыры в записи не заметны пока вы не замените отказавший диск. Неправильная контрольная сумма или не верное зеркало 
   приведут в результате к тому, что устройство RAID вернет в файловую систему мусорные данные. Обычная файловая система возвращает 
   эти мусорные данные как содержимое файла.</p>
   <p>ZFS решает эту проблему копированием-при-записи и контрольными суммами. Копирование-при-записи (<a class="link" href="Ch07.html" 
   target="_top">Глава 7</a>) означает, что данные никогда не переписываются нв их местонахождении. Каждое обновление является 
   транзакцией, и либо выполняется полностью, либо не выполняется совсем, возвращая систему в состояние до ее обновления. ZFS также
   имеет контрольные суммы, следовательно она может обнаруживать когда диск возвращает неверные данные. Когда ZFS определяет 
   неверные данные, она замещает эти данные правильными данными из другого источника, такого как дополнительная копия данных, 
   зеркалированные диски или контрольная сумма RAID-Z. Совместно это создает свойство самовосстановления ZFS.</p>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Special_VDEVs"> </a>Специальные VDEV</h3>
   </div></div></div>
   <p>Пулы могут применять VDEV специального назначения для улучшения производительности пулов. Такие особые типы VDEV используются не 
   для постоянного хранения данных, а используются вместо этого для поддержки временных дополнительных копий данных на более быстрых 
   устройствах.</p>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="SLOG_ZIL">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Выделенный журнал намерений (SLOG, ZIL)</span></h4>
    </div></div></div>
    <p>ZFS поддерживает журнал намерений ZFS (ZIL, ZFS Intent Log) в качестве части пула. Аналогично журналам в 
	некоторых других файловых системах, это то место, куда записываются операции, находящиеся в процессе выполнения, следовательно, 
	они могут быть завершены или отыграны назад в случае отказа системы или отказа питания. ZIL является субъектом для условий 
	нормальной работы диском. Пул может иметь внезапные всплески при использовании или латентность, связанную с задержкой, которые 
	приводят к меньшей производительности.</p>
    <p>Одним из способов поддержки производительности заключается в выделении ZIL из нормальных операций пула. Вы можете использовать 
	выделенное устройство в качестве отдельного преднамеренного протоколирования (SLOG, Separate Intent Log) вместо применения обычной 
	части пула. Выделенное устройство обычно небольшое, но очень быстрое, такое как SSD с большим числом перезаписей 
	{<span class="emphasis"><em>Прим. пер.: eMLC SSD, также, если позволяют соедства, лучше использовать устройство с интерфейсом 
	PCIe (см. <a class="link" href="http://www.mdl.ru/Solutions/Put.htm?Nme=Storage#LatencyDatas" target="_top">Справочные 
	данные о характерных временах латентности</a>)</em></span>.}</p>
    <p>Вместо копирования данных из SLOG в пул основного хранения при получении запроса, ZFS может собирать данные в разумные группы 
	и записывать их более эффективно.</p>
    <p>Некоторые виды программного обеспечения настаивают на получении подтверждения того, что записанные ими на диск данные 
	действительно находятся на диске до его отправления. Базы данных часто это делают чтобы избежать порчи записываемых ими на диск 
	данных в случае краха системы или отключения питания. Некоторые операции NFS делают то же самое. Путем записи таких запросов в 
	более быстрое устройство ведения журнала и сообщения &quot;все сделано&quot;, ZFS ускоряет эти операции. База данных 
	завершает транзакцию и движется дальше. Вы получаете производительность почти на уровне SSD при использовании недорогих дисков 
	в качестве носителей информации.</p>
    <p>Вы можете зеркалировать ваш ZIL для предотвращения потери данных.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="L2ARC">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Кэш (L2ARC)</span></h4>
    </div></div></div>
    <p>Когда файл считывается с диска, система сохраняет его в памяти пока память не понадобится для других целей. Это старая 
	технология, использовавшаяся даже еще в первые дни BSD. Посмотрите <span class="term"><code>top(1)</code></span> в BSD 
	системе на основе UFS и вы увидите кусочек памяти, помеченный как <span class="term"><strong class="userinput"><code>Buf</code></strong></span>.
	Это буфер кэша.</p>
    <p>Традиционные буферы кэша, однако, разрабатывались десятилетия назад. ZFS имеет адаптивный кэш замещения, или ARC (Adaptive
Replacement Cache), разработанный для современного оборудования, которое предоставляет бОльшие скорости. ARC остается самой последней и
наиболее часто применяемой для доступа к файлам.</p>
    <p>Очень немногие современные системы, однако, имеют достаточно оперативной памяти для кэширования в тех объемах, в которых 
	он хотят это делать. Точно так же как ARC может применять SLOG для ускорения записи, он может использовать очень быстрые 
	диски для ускорения чтений. Это называется ARC 2 уровня, или L2ARC.</p>
    <p>Когда объект используется достаточно часто, для того, чтобы извлечь выгоду из кэширования, однако недостаточно часто для 
	хранения в оперативной памяти, ZFS может хранить его в устройстве кэширования. L2ARC обычно является устройством с очень быстрым 
	и предусматривающим многократное перезаписывание SSD или NVM.</p>
   </div>
  </div>
   
  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="VDEVs_Affect_Performance"> </a>Как VDEV воздействуют на производительность</h3>
   </div></div></div>
   <p>Все различные типы VDEV имеют различную производительность. Эталонное тестирование и разбиение производительности диска является
   сложной темой, заслуживающей очень большого учебника, если кто-то потрудится прочитать его. Любой конкретный совет, который мы бы 
   должны были дать здесь, очень быстро устарел бы, так что давайте просто рассмотрим некоторые общие вопросы.</p>
   <p>Одним из наиболее распространенных измерений является число операций ввода/ вывода в секунду, или IOPS (Input/Output Per Second),
   число отдельных операций, которые диск может выполнять каждую секунду. IOPS шпиндельных дисков обычно физически ограничены тем, 
   насколько часто головеи чтения / записи  могут перемещаться с места на место над поверхностью. Твердотельные диски имеют столь 
   исключительную производительность благодаря тому, что им нет нужды физически перемещать что бы то ни было.</p>
   <p>Число шпинделей без контрольных сумм также сдерживает потоковые чтение и запись в пуле без повреждений. &quot;потоковая&quot; 
   производительность сводится к количеству мегабайт в секунду (МБ/с), которые данный диск может читать или записывать. Когда какой-то 
   диск читает или записывает данные последовательно, его головки не должны осуществлять поиск вперед или назад для различных 
   местоположений. Именно в этих условиях диск достигает своей наилучшей возможной потоковой производительности, выдавая максимальную
   пропускную способность. Количество шпинделей влияет как на случайную, так и на последовательную производительности. Массив из 
   12 одно-терабайтных (12x 1ТБ) дисков обычно превосходит по производительности массив из шести двух-терабайтных (6x 2ТБ) дисков, 
   поскольку большее число шпинделей и головок повышает и IOPS и потоковую производительности. Наличие большего числа головок 
   означает, что ZFS сможет читать с- и записывать в- большее число различных местоположений на диске за один раз, в результате 
   приводя к бОльшей производительности IOPS. Большее число шпинделей означает, что большее число дисков работает со своей максимальной
   пропускной способностью для чтения и записи ваших данных. Однако, большее число дисков требует больших стеллажей или шасси, большего 
   электропотребления и большего числа контроллеров.</p>
   <p>Другие обычные измерения включают пропускную способность на чтение, на запись, эффективность использования пространства и  
   потоковую производительность.</p>
   <p>Говоря в общем, зеркала могут предоставлять лучшие IOPS и пропускную способность при чтении, однако RAID-Z могут обеспечивать 
   лучшую производительность при записи и гораздо более эффективное использование пространства.</p>
   <p>Пул с несколькими VDEV разделяет свои данные по всем VDEV. Это увеличивает производительность, но может стоить пространства, поскольку 
   каждое индивидуальное VDEV имеет свои собственные диски резервирования. Пул с несколькими VDEV, скорее всего, увеличивает надежность 
   и отказоустойчивость. В то время как резервирование ZFS все выполняется на уровне VDEV, пул с несколькими избыточными VDEV скорее всего 
   сможет  выдержать большее число отказов. Чем больше VDEV вы имеете в пуле, тем лучше его производительность.</p>
   <p>Давайте пройдемся по некоторым общим конфигурациям VDEV и рассмотрим как различные возможные параметры воздействуют на 
   производительность и емкость. Предположим, что мы применяем скромные общедоступные шпиндельные диски 1ТБ. Каждый диск способен 
   выполнять 250 IOPS и потоковые чтение/ запись составляют 100 МБ/с.</p>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="One_Disk">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Один диск</span></h4>
    </div></div></div>
    <p>Когда есть только один диск, существует только одна возможная конфигурация, одиночного VDEV чередования ZFS. Это самая основная 
	конфигурация, причем не обеспечивающя никакой отказоустойчивости. Если этот единственный диск погибнет, все данные будут 
	утрачены.</p>
        <table rules="all" width="100%" style="text-align:center" id="add_fs_options">
        <caption>Таблица 1: Конфигурация одно- дискового виртуального устройства</caption><col width="9%"/><col width="11%"/><col width="12%"/><col width="12%"/><col width="12%"/><col width="12%"/>
		<col width="16%"/><col width="16%"/><thead><tr valign="top">
          <th>Диски</th><th>Режим</th>
          <th>Чтение IOPS</th><th>Запись IOPS</th>
          <th>Чтение МБ/с</th><th>Запись МБ/с</th>
          <th>Используемое пространство</th><th>Отказо- устойчивость</th>
        </tr></thead><tr valign="top">
          <td><p>1</p></td><td><p>Stripe</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>100</p></td><td><p>100</p></td>
          <td><p>1ТБ (100%)</p></td><td><p>нет</p></td>
        </tr></tbody></table>
    <p>Характеристики одно-дискового устройства чередования выглядят подозрительно похоже на характеристики лежащего в основе диска.
	Странно, да?</p>
	</div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Two_Disks">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Два диска</span></h4>
    </div></div></div>
    <p>Если ваша система имеет два диска, вы можете построить свой пул состоящим из двух VDEV чередования или единственного 
	зеркалированного VDEV.</p>
    <p>VDEV чередования удваивают доступное хранилище и пропускную способность, но одновременно удваивают риск отказа. ZFS раскладывает блоки
	каждого файла на два диска. Если хотя бы один диск откажет, все данные станут неиспользуемыми.</p>
	<p>Использование отдельного зеркалированного VDEV сохраняет каждый блок данных на обоих дисках. Это обеспечивает лучшую 
	производительность чтения, поскольку блоки могут считываться с обоих дисков одновременно. Но вы получите емкость 
	наименьшего диска. Производительность на запись будет ограничена скоростью самого медленного диска. Один диск может отказать, 
	однако пул все еще можно будет использовать.</p>
        <table rules="all" width="100%" style="text-align:center" id="add_fs_options">
        <caption>Таблица 2: Конфигурации двух- дискового виртуального устройства</caption><col width="9%"/><col width="11%"/><col width="12%"/><col width="12%"/><col width="12%"/><col width="12%"/>
		<col width="16%"/><col width="16%"/><thead><tr valign="top">
          <th>Диски</th><th>Режим</th>
          <th>Чтение IOPS</th><th>Запись IOPS</th>
          <th>Чтение МБ/с</th><th>Запись МБ/с</th>
          <th>Используемое пространство</th><th>Отказо- устойчивость</th>
        </tr></thead><tr valign="top">
          <td><p>2</p></td><td><p>2x Stripe</p></td>
          <td><p>500</p></td><td><p>500</p></td>
          <td><p>200</p></td><td><p>200</p></td>
          <td><p>2ТБ (100%)</p></td><td><p>нет</p></td>
        </tr><tr valign="top">
          <td><p>2</p></td><td><p>1x 2 дисковое зеркало</p></td>
          <td><p>500</p></td><td><p>250</p></td>
          <td><p>200</p></td><td><p>100</p></td>
          <td><p>1ТБ (50%)</p></td><td><p>1</p></td>
        </tr></tbody></table>
    <p>Как показывает таблица, наш пул зеркала дает половинную производительность записи от пула с чередующимися областями и имеет половинную емкость
	пространства.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Three_Disks">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Три диска</span></h4>
    </div></div></div>
    <p>Три диска означают больше возможностей, включая более глубокое зеркалирование и RAID-Z. Вы можете таже использовать пул из трех 
	чередующихся дисков, однако вероятность отказа является еще более высокой</p>
    <p>Более глубокое зеркалирование имеет больше дисков, предоставляя большую отказоустойчивость и улучшает производительность
	чтения. Большее число шпинделей и головок означает, что VDEV может читать данные с наименее занятых из трех дисков, 
	обслуживающее случайные чтения более быстро. Производительность записи в зеркало все еще ограничена самым медленным из дисков в 
	зеркале.</p>
    <p>RAIDZ-1 предлагает лучшуюю эффективность использования пространства, при том что отказоустойчивость требует только один из 
	дисков в VDEV. Данные распределяются по всем дискам, следовательно они могут работать вместе при выполнении чтения и записи.
	Распространение данных по всем дискам улучшает производительность потоковой записи. В отличие от зеркала, в RAID-Z все 
	диски могут записывать свои совместные данные одновременно, вместо того, чтобы каждый диск записывал идентичные данные.</p>
        <table rules="all" width="100%" style="text-align:center" id="add_fs_options">
        <caption>Таблица 3: Конфигурации трех- дискового виртуального устройства</caption><col width="9%"/><col width="11%"/><col width="12%"/><col width="12%"/><col width="12%"/><col width="12%"/>
		<col width="16%"/><col width="16%"/><thead><tr valign="top">
          <th>Диски</th><th>Режим</th>
          <th>Чтение IOPS</th><th>Запись IOPS</th>
          <th>Чтение МБ/с</th><th>Запись МБ/с</th>
          <th>Используемое пространство</th><th>Отказо- устойчивость</th>
        </tr></thead><tr valign="top">
          <td><p>3</p></td><td><p>1x 3 диска зеркало</p></td>
          <td><p>750</p></td><td><p>250</p></td>
          <td><p>300</p></td><td><p>100</p></td>
          <td><p>1ТБ (33%)</p></td><td><p>2</p></td>
        </tr><tr valign="top">
          <td><p>3</p></td><td><p>1x 3 диска RAID-Z1</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>200</p></td><td><p>200</p></td>
          <td><p>2ТБ (66%)</p></td><td><p>1</p></td>
        </tr></tbody></table>
     <p>Отметим, что IOPS не обязательно масштабируется до действительной производительности чтения / записи. Зеркальное VDEV в троекратно
	превосходит IOS RAID-Z1, поскольку головки каждого устройства могут работать независимо, в то время как в RAID-Z1 головки должны 
	работать совместно. В мегабайтах в секунду зеркала имеют преимущество применения пропускной способности всех своих дисков, в 
	то время как RAID-Z1 теряет значимость пропускной способности одного диска из-з необходимости в контрольных суммах. Трех- 
	дисковое зеркало также пишет вдвое меньше МБ/с, поскольку оно записывает одни и те же данные на все диски, в то время как 
	RAID-Z1 может записывать на все свои диски, однако частично теряя пропускную способность на записи контрольных сумм.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Four_or_Five_Disks">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Четыре или пять дисков</span></h4>
    </div></div></div>
    <p>С четырьмя или пятью дисками вы получаете еще больше вариантов.</p>
    <p>Множество зеркалированных VDEV (аналогичных традиционному RAID10) предоставляют наилучшую из возможных производительность 
	для произвольных нагрузок ввода / вывода подобных базам данных. Когда вы делите четыре диска на два зеркалированных VDEV по два 
	диска в каждом, ZFS разделяет записи по обоим зеркалам. Одно зеркало хранит одну половину ваших данных, а второе оставшуюся 
	половину. Это помогает расшить узкое место при записи для зеркал, в то же время продолжая обеспечивать впечатляющую 
	производительность чтения.</p>
    <p>При четырех дисках появляется вариант RAID-Z2. Две контрольные суммы RAID-Z2 означают, что VDEV могут продолжать работать при 
	потери любых двух дисков. В сравнении с зеркалом с тем же числом дисков производительность хуже; однако уже нет проблем при 
	одновременном отказе двух дисков.</p>
    <p>С пятью дисками мы можем развернуть RAID-Z3. VDEV RAID-Z2 может выдерживать утрату трех дисков. RAID-Z3 разменивает 
	производительность на отказоустойчивость {<span class="emphasis"><em>Прим. пер.: хотя, наверное, найдутся апологеты 
	улучшения на треть надежности за счет 10% пространства при сохранении производительности</em></span>.}</p>
    <p>А RAID-Z1 продолжает оставаться вариантом, естественно.</p>
        <table rules="all" width="100%" style="text-align:center" id="add_fs_options">
        <caption>Таблица 4: Конфигурации четырех- или пяти- дискового виртуального устройства</caption><col width="9%"/><col width="11%"/><col width="12%"/><col width="12%"/><col width="12%"/><col width="12%"/>
		<col width="16%"/><col width="16%"/><thead><tr valign="top">
          <th>Диски</th><th>Режим</th>
          <th>Чтение IOPS</th><th>Запись IOPS</th>
          <th>Чтение МБ/с</th><th>Запись МБ/с</th>
          <th>Используемое пространство</th><th>Отказо- устойчивость</th>
        </tr></thead><tr valign="top">
          <td><p>4</p></td><td><p>2x 2 диска зеркало</p></td>
          <td><p>1000</p></td><td><p>500</p></td>
          <td><p>400</p></td><td><p>200</p></td>
          <td><p>2ТБ (50%)</p></td><td><p>2 (1/VDEV)</p></td>
        </tr><tr valign="top">
          <td><p>4</p></td><td><p>1x 4 диска RAID-Z1</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>300</p></td><td><p>300</p></td>
          <td><p>3ТБ (75%)</p></td><td><p>1</p></td>
        </tr><tr valign="top">
          <td><p>4</p></td><td><p>1x 4 диска RAID-Z2</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>200</p></td><td><p>200</p></td>
          <td><p>2ТБ (50%)</p></td><td><p>2</p></td>
        </tr><tr valign="top">
          <td><p>5</p></td><td><p>1x 5 дисков RAID-Z1</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>400</p></td><td><p>400</p></td>
          <td><p>4ТБ (80%)</p></td><td><p>1</p></td>
        </tr><tr valign="top">
          <td><p>5</p></td><td><p>1x 5 дисков RAID-Z2</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>300</p></td><td><p>300</p></td>
          <td><p>3ТБ (60%)</p></td><td><p>2</p></td>
        </tr><tr valign="top">
          <td><p>5</p></td><td><p>1x 5 дисков RAID-Z3</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>200</p></td><td><p>200</p></td>
          <td><p>2ТБ (40%)</p></td><td><p>3</p></td>
        </tr></tbody></table>
    <p>Обратите внимание на то, как сопоставляются потоковые (МБ/с) производительности чтения и записи RAID-Z1 с RAID-Z2 и как RAID-Z3 
	соотносится с ними обоими. Добавление диска контрольных сумм означает жертвоприношение пропускной способности этого диска.</p>
    <p>Отказоустойчивость множества зеркальных VDEV слегка мудреная. Следует помнить, избыточность рассчитывается на основе VDEV, а 
	не всего пула. Каждое зеркалированное VDEV все еще обеспечивает устойчивость к отказам n-1. Если по одному диску в каждом из 
	зеркалированных VDEV продолжат свою работу, все данные останутся доступными. при наличии в вашем пуле двух зеркалированнх VDEV 
	с двумя дисками в каждом, вы можете потерять по одному диску в каждом VDEV и продолжать работать. Однако, если вы потеряете оба 
	диска в одном VDEV, пул умрет и вы потеряете все данные.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Six_to_Twelve_Disks">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">От шести до двенадцати дисков</span></h4>
    </div></div></div>
    <p>При большом количестве дисков решение переносится к балансировке отказоустойчивости, эффективности использования пространства 
	и производительности.</p>
    <p>Шесть дисков могут стать тремя двухдисковыми зеркалированными VDEV, предоставляя вам достаточный объем хранения и хорошую 
	производительность на запись. Вы можете выбрать пару трех-дисковых зеркалированных VDEV, предоставляющих вам меньшее пространство,
	однако допускающих отказ дух дисков в каждом из наборов по три без риска потери данных. Или они могут стать RAID-Z VDEV.</p>
    <p>При наличии более шести дисков вы можете получить в одном пуле несколько VDEV RAID-Z. Дюжина дисков может работать совместно, 
	как единое VDEV, предоставляя вам больше доступного пространства, или могут быть разделены на два VDEV, давая меньше полезного 
	пространства, но при этом лучшую производительность и бОльшую отказоустойчивость.</p>
        <table rules="all" width="100%" style="text-align:center" id="add_fs_options">
        <caption>Таблица 5: Конфигурации от шести- до двенадцати- дисковых виртуальных устройств</caption><col width="9%"/><col width="11%"/><col width="12%"/><col width="12%"/><col width="12%"/><col width="12%"/>
		<col width="16%"/><col width="16%"/><thead><tr valign="top">
          <th>Диски</th><th>Режим</th>
          <th>Чтение IOPS</th><th>Запись IOPS</th>
          <th>Чтение МБ/с</th><th>Запись МБ/с</th>
          <th>Используемое пространство</th><th>Отказо- устойчивость</th>
        </tr></thead><tr valign="top">
          <td><p>6</p></td><td><p>3x 2 диска зеркал</p></td>
          <td><p>1500</p></td><td><p>750</p></td>
          <td><p>600</p></td><td><p>300</p></td>
          <td><p>3ТБ (50%)</p></td><td><p>3 (1/VDEV)</p></td>
        </tr><tr valign="top">
          <td><p>6</p></td><td><p>2x 3 диска зеркал</p></td>
          <td><p>1500</p></td><td><p>500</p></td>
          <td><p>600</p></td><td><p>200</p></td>
          <td><p>2ТБ (33%)</p></td><td><p>4 (2/VDEV)</p></td>
        </tr><tr valign="top">
          <td><p>6</p></td><td><p>1x 6 дисковый RAID-Z1</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>500</p></td><td><p>500</p></td>
          <td><p>5ТБ (83%)</p></td><td><p>1</p></td>
        </tr><tr valign="top">
          <td><p>6</p></td><td><p>1x 6 дисковый RAID-Z2</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>400</p></td><td><p>400</p></td>
          <td><p>4ТБ (66%)</p></td><td><p>2</p></td>
        </tr><tr valign="top">
          <td><p>6</p></td><td><p>1x 6 дисков RAID-Z1</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>400</p></td><td><p>400</p></td>
          <td><p>4ТБ (80%)</p></td><td><p>1</p></td>
        </tr><tr valign="top">
          <td><p>6</p></td><td><p>1x 6 дисков RAID-Z2</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>300</p></td><td><p>300</p></td>
          <td><p>3ТБ (60%)</p></td><td><p>2</p></td>
         </tr><tr valign="top">
          <td><p>6</p></td><td><p>1x 6 дисков RAID-Z3</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>300</p></td><td><p>300</p></td>
          <td><p>3ТБ (50%)</p></td><td><p>3</p></td>
        </tr></thead><tr valign="top">
          <td><p>12</p></td><td><p>6x 2 диска зеркал</p></td>
          <td><p>3000</p></td><td><p>1500</p></td>
          <td><p>1200</p></td><td><p>600</p></td>
          <td><p>6ТБ (50%)</p></td><td><p>6 (1/VDEV)</p></td>
        </tr><tr valign="top">
          <td><p>12</p></td><td><p>4x 3 диска зеркал</p></td>
          <td><p>3000</p></td><td><p>1000</p></td>
          <td><p>1200</p></td><td><p>400</p></td>
          <td><p>4ТБ (33%)</p></td><td><p>8 (2/VDEV)</p></td>
       </tr><tr valign="top">
          <td><p>12</p></td><td><p>1x 12 дисков RAID-Z1</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>1100</p></td><td><p>1100</p></td>
          <td><p>11ТБ (92%)</p></td><td><p>1</p></td>
       </tr><tr valign="top">
          <td><p>12</p></td><td><p>1x 12 дисков RAID-Z1</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>1100</p></td><td><p>1100</p></td>
          <td><p>11ТБ (92%)</p></td><td><p>1</p></td>
       </tr><tr valign="top">
          <td><p>12</p></td><td><p>2x 6 дисков RAID-Z1</p></td>
          <td><p>500</p></td><td><p>500</p></td>
          <td><p>1000</p></td><td><p>1000</p></td>
          <td><p>10ТБ (83%)</p></td><td><p>2 (1/VDEV)</p></td>
       </tr><tr valign="top">
          <td><p>12</p></td><td><p>3x 4 диска RAID-Z1</p></td>
          <td><p>750</p></td><td><p>750</p></td>
          <td><p>900</p></td><td><p>900</p></td>
          <td><p>9ТБ (75%)</p></td><td><p>3 (1/VDEV)</p></td>
       </tr><tr valign="top">
          <td><p>12</p></td><td><p>1x 12 дисков RAID-Z2</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>1000</p></td><td><p>1000</p></td>
          <td><p>10ТБ (83%)</p></td><td><p>2</p></td>
       </tr><tr valign="top">
          <td><p>12</p></td><td><p>2x 6 дисков RAID-Z2</p></td>
          <td><p>500</p></td><td><p>500</p></td>
          <td><p>800</p></td><td><p>800</p></td>
          <td><p>8ТБ (66	%)</p></td><td><p>4 (2/VDEV)</p></td>
       </tr><tr valign="top">
          <td><p>12</p></td><td><p>1x 12 дисков RAID-Z3</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>900</p></td><td><p>900</p></td>
          <td><p>9ТБ (75%)</p></td><td><p>3</p></td>
       </tr><tr valign="top">
          <td><p>12</p></td><td><p>2x 6 дисков RAID-Z3</p></td>
          <td><p>500</p></td><td><p>500</p></td>
          <td><p>600</p></td><td><p>600</p></td>
          <td><p>6ТБ (50%)</p></td><td><p>6 (3/VDEV)</p></td>
        </tr></tbody></table>
    <p>Применение множества RAID-Z устройств в пуле во многом аналогично применению множества зеркалированных устройств в нем.
	Устойчивость к отказам дисков измеряется в показателе на VDEV, не на пул. Ваш массив из 12 дисков, состоящий из двух 
	шести-дисковых VDEV RAID-Z2 может обработать утрату четырех дисков, при этом предусматривая потерю вами двух дисков на VDEV.</p>
   </div>
   <div class="section">
    <div xmlns="" class="titlepage"><div><div>
     <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Many_Disks">
	 </a><span  style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Много дисков</span></h4>
    </div></div></div>
    <p>Общий совет заключается в применении не более чем от 9 до 12 дисков на VDEV. Вы можете использовать и больше, однако ZFS 
	не предназначен для этого. Давайте рассмотрим массив из 36 дисков, чтобы увидеть некоторые возможные механизмы и их влияние 
	на производительность.</p>
    <table rules="all" width="100%" style="text-align:center" id="add_fs_options">
        <caption>Таблица 6: Конфигурации c {36}- дисковыми виртуальными устройствами</caption><col width="9%"/><col width="11%"/><col width="12%"/><col width="12%"/><col width="12%"/><col width="12%"/>
		<col width="16%"/><col width="16%"/><thead><tr valign="top">
          <th>Диски</th><th>Режим</th>
          <th>Чтение IOPS</th><th>Запись IOPS</th>
          <th>Чтение МБ/с</th><th>Запись МБ/с</th>
          <th>Используемое пространство</th><th>Отказо- устойчивость</th>
        </tr></thead><tr valign="top">
          <td><p>36</p></td><td><p>18x 2 диска зеркал</p></td>
          <td><p>9000</p></td><td><p>4500</p></td>
          <td><p>3600</p></td><td><p>1800</p></td>
          <td><p>18ТБ (50%)</p></td><td><p>18 (1/VDEV)</p></td>
        </tr><tr valign="top">
          <td><p>36</p></td><td><p>12x 3 диска зеркал</p></td>
          <td><p>1200</p></td><td><p>3000</p></td>
          <td><p>3600</p></td><td><p>1800</p></td>
          <td><p>12ТБ (33%)</p></td><td><p>24 (2/VDEV)</p></td>
        </tr><tr valign="top">
          <td><p>36</p></td><td><p>1x 36 дисковый RAID-Z1</p></td>
          <td><p>250</p></td><td><p>250</p></td>
          <td><p>3400</p></td><td><p>3400</p></td>
          <td><p>34ТБ (94%)</p></td><td><p>2</p></td>
        </tr><tr valign="top">
          <td><p>36</p></td><td><p>2x 18 дисков RAID-Z2</p></td>
          <td><p>500</p></td><td><p>500</p></td>
          <td><p>3200</p></td><td><p>3200</p></td>
          <td><p>32ТБ (89%)</p></td><td><p>4 (2/VDEV)</p></td>
        </tr><tr valign="top">
          <td><p>36</p></td><td><p>4x 9 дисков RAID-Z2</p></td>
          <td><p>1000</p></td><td><p>1000</p></td>
          <td><p>2800</p></td><td><p>2800</p></td>
          <td><p>28ТБ (78%)</p></td><td><p>8 (2/VDEV)</p></td>
        </tr><tr valign="top">
          <td><p>36</p></td><td><p>6x 6 дисков RAID-Z2</p></td>
          <td><p>1500</p></td><td><p>1500</p></td>
          <td><p>2400</p></td><td><p>2400</p></td>
          <td><p>36ТБ (66%)</p></td><td><p>12 (2/VDEV)</p></td>
        </tr></tbody></table>
        <p>При использовании большего числа VDEV вы можете создавать поразительно быстрые пулы. Пул из 18 двухдисковых зеркалированных 
	VDEV способен читать данные может считывать данные быстрее чего бы то ни было еще {<span class="emphasis"><em>Прим. пер.: 
	построенного на этих дисках</em></span>} - и он может потерять до 18 дисков до отказа! Да, они должны быть реальными 18 
	дисками, но если у вас есть дисковые полки с различными блоками питания, это вполне возможно. {<span class="emphasis"><em>Прим. пер.: 
	можем вам <a class="link" href="http://www.mdl.ru/Solutions/Put.htm?Nme=MdlStorage" target="_top">помочь</a>разместить по 48x и/или 60x 
	3.5&quot; дисков (до 8ГБ каждый, итого 480ТБ &quot;сырых&quot; данных) на шасси</em></span>}. С другой стороны, выход из строя двух 
	дисков в пуле может повлечь смерть всего пула.</p>
    <p>Добавление контрольных сумм или зеркалирований в каждое VDEV увеличивает надежность. Большее число VDEV увеличивает 
	производительность. Ваша задача заключается в манипулировании этими двумя параметрами для поддержки вашей среды.</p>
    <p>Каждое VDEV ограничено производительностью произвольных чтений и записи самого медленного диска, так что если у вас очень 
	много дисков в одном VDEV, вы уступаете росту производительности всего лишь ради небольшого прироста эффективности использования 
	пространства. Хотя вы можете добавить устройства L2ARC и SLOG для улучшения производительности, лучше избежать этих 
	совместных проблем.</p>
    <p>Следовательно, если большее число VDEV всегда лучше, почему пул 6x 6 дисков RAID-Z2 настолько медленнее по чтению и записи 
	в сравнении с пулом 1x 36 RAID-Z2 дисков? Ответ находится в столбце отказоустойчивости. При наличии у вас большего числа VDEV RAID-Z2,
	вы получаете бОльшую отказоустойчивость и вы можете выживать в случае бОльшего числа отказов. Когда ваш диск обеспечивает 
	отказоустойчивость, он сохраняет  дополнительные копии ваших данных, следовательно он может восстановить утраченную в случае 
	отказа диска копию. Система повторно вычисляет и сохраняет контрольные суммы при каждом изменении данных. Контрольные суммы не 
	используются при чтении файлов, пока не утрачены первоначальные копии. Диски, применяемые для хранения контрольных сумм больше 
	не способствуют потоковой производительности. Вы можете восстановить производительность добавив еще дисков. Пул RAID-Z2 из 6x 8 дисков
	будет эквивалентен 36 дискам с данными и 12 дискам с контрольными суммами и будет в состоянии превзойти по производительности пул 
	RAID-Z2 дисков 1x 36</p>
    <p>Давайте примем во внимание то, что вы знаете о VDEV и создадим некоторые рабочие пулы с ними.</p>
   </div>
  </div>
</div>

<!----><script type="text/javascript" src="FooterAndSidebar.js">
</script><script type="text/javascript"><!--</div id="content"> is inside next code
document.write(FooterAndSidebar);//-->
</script>

</body></html>