<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:exsl="http://exslt.org/common" xmlns:ng="http://docbook.org/docbook-ng" xmlns:fb="http://ogp.me/ns/fb#">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet"/>
<title>Контейнеры Linux</title>
<meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"/>
<meta name="mavenGroupId" content="www.mdl.ru"/>
<meta name="mavenArtifactId" content="Контейнеры Linux"/>
<meta name="mavenVersionId" content="1.0.0"/>
<link rel="home" href="index.html" title="Книга рецептов Proxmox"/>
<link rel="up" href="index.html" title="Книга рецептов Proxmox"/>
<link rel="prev" href="Ix01.html" title="Указатель"/>
<link rel="next" href="Convert_OpenVZ_to_LXC.html" title="Преобразование OpenVZ в LXC"/>
<meta name="git-sha" content=""/>
<meta name="buildTime" content=""/>
<script type="text/javascript">
            //The id for tree cookie
            var treeCookieId = "proxmox-cookbook";
            var language = "en";
            var w = new Object();
            //Localization
            txt_filesfound = 'Results';
            txt_enter_at_least_1_char = "You must enter at least one character.";
            txt_browser_not_supported = "Please enable JavaScript.";
            txt_please_wait = "Please wait. Search in progress...";
            txt_results_for = "Results for: ";
</script>
<style type="text/css">
            input {
            margin-bottom: 5px;
            margin-top: 2px;
            }

            .folder {
            display: block;
            height: 22px;
            padding-left: 20px;
            background: transparent url(../common/jquery/treeview/images/folder.gif) 0 0px no-repeat;
            }
</style>
<link rel="shortcut icon" href="../MdlLogo.gif" type="image/gif"/>
<link rel="stylesheet" type="text/css" href="../common/css/positioning.css"/>
<link rel="stylesheet" type="text/css" href="../common/css/custom.css"/>
<link rel="canonical" href="http://onreader.mdl.ru/ProxmoxCookbook/content/index.html"/>
<!--[if IE]>
	<link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
<![endif]-->
<link rel="stylesheet" type="text/css" href="../common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css"/>
<link rel="stylesheet" type="text/css" href="../common/jquery/treeview/jquery.treeview.css"/>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.0.min.js"><!----></script>
<script type="text/javascript" src="../common/jquery/jquery-ui-1.8.2.custom.min.js"><!----></script>
<script type="text/javascript" src="../common/jquery/jquery.cookie.js"><!----></script>
<script type="text/javascript" src="../common/jquery/treeview/jquery.treeview.min.js"><!----></script>
<link rel="stylesheet" type="text/css" href="http://cdn.jsdelivr.net/qtip2/2.2.0/jquery.qtip.min.css"/>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/qtip2/2.2.0/jquery.qtip.min.js">
<!--jQuery plugin for glossary popups. --></script><script type="text/javascript" src="search/htmlFileList.js"><!----></script>
<script type="text/javascript" src="search/htmlFileInfoList.js"><!----></script>
<script type="text/javascript" src="search/nwSearchFnt.js"><!----></script>
<script type="text/javascript" src="search/stemmers/en_stemmer.js">
<!--//make this scalable to other languages as well.--></script>
<script type="text/javascript" src="search/index-1.js"><!----></script>
<script type="text/javascript" src="search/index-2.js"><!----></script>
<script type="text/javascript" src="search/index-3.js"><!----></script>
<script type="text/javascript">
	    var _gaq = _gaq || [];
	    _gaq.push(['_setAccount', 'UA-17511903-1']);
	    
	    _gaq.push(['_setDomainName', '.openstack.org']);	        
</script>
<script type="text/javascript" src="../common/ga.js"><!----></script>
<script language="javascript" src="/js/common.js"></script>
<link rel="stylesheet" href="../common/css/googlecode.css">
<script src="../common/highlight.pack.js"></script>
</head>
<body>
<!----><script type="text/javascript"><!--
hljs.initHighlightingOnLoad();
HeaderName = 'Контейнеры Linux';
PrevRef = 'Ix01.html';
UpRef = 'index.html';
NextRef = 'Convert_OpenVZ_to_LXC.html';//-->
</script>
<!----><script type="text/javascript" src="HeaderAndToolbar.js">
</script><script type="text/javascript"><!--
document.write(HeaderAndToolbar); //-->
</script>
<div id="content">
 <div class="part">
  <div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title">
   Контейнеры Linux</h1>
  </div></div></div>
  <div class="partintro"><div xmlns=""/>
  <p>Перевод <a class="link" href="http://pve.proxmox.com/wiki/Linux_Container" target="_top">Linux Container</a></p>
  <p>опубликованной 23 October 2015, at 07:05</p>

  <div class="toc"><p><strong>Содержание</strong></p>
   <dl>
	<dt><span class="chapter"><a href="Linux_Container.html">Контейнеры Linux</a></span></dt>
	<dd><dl>
	<dt><span class="section"><a href="Linux_Container.html#Introduction">Введение</a></span></dt>
	<dt><span class="section"><a href="Linux_Container.html#System_reqs">Системные требования</a></span></dt>
	<dt><span class="section"><a href="Linux_Container.html#Features">Функциональность</a></span></dt>
	<dt><span class="section"><a href="Linux_Container.html#Supported_OS">Поддерживаемые операционные системы</a></span></dt>
	<dt><span class="section"><a href="Linux_Container.html#Manage_containers">Управление контейнерами</a></span></dt>
	  <dd><dl>
        <dt><span class="section"><a href="Linux_Container.html#Get_template">Получение шаблона контейнера</a></span></dt>
        <dt><span class="section"><a href="Linux_Container.html#Create">Создание контейнера</a></span></dt>
        <dt><span class="section"><a href="Linux_Container.html#Start">Запуск контейнера</a></span></dt>
        <dt><span class="section"><a href="Linux_Container.html#Stop">Останов контейнера</a></span></dt>
        <dt><span class="section"><a href="Linux_Container.html#Backup">Резервное копирование контейнера</a></span></dt>
        <dt><span class="section"><a href="Linux_Container.html#Restore">Восстановление контейнера</a></span></dt>
      </dl></dd>
	<dt><span class="section"><a href="Linux_Container.html#Migrate">Перенос контейнера с OpenVZ на LXC</a></span></dt>
	<dt><span class="section"><a href="Linux_Container.html#References">Ссылки</a></span></dt>
	</dl></dd>
    </dl>
  </div>
  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Introduction"> </a>Введение</h3>
   </div></div></div>
   <p>Контейнер Linux (LXC, Linux Container) является средой виртуализации уровня операционной системы для выполнения 
   множества изолированных Linux систем на одном хосте под управлением Linux ()<a class="link" 
   href="https://en.wikipedia.org/wiki/LXC" target="_top">Wikipedia LXC</a>. Он может быть также определен как облегченная виртуальная 
   машина, однако, чрезвычайно быстрая и легкая для развертывания.</p>
   <p>Существует не так много накладных расходов и, следовательно, это идеальное решение для эффективного использования ресурсов.</p>
   <p>При запуске не требуется никаких дополнительных загрузок ядра, в результате очень быстрая загрузка.</p>
   <p>Контейнеры Linux вводятся в Proxmox VE 4.0 и поддерживают модель хранения Proxmox.</p>
   <p>{<span class="emphasis"><em>Прим. пер.: с более современной (31 марта 2016) информацией о контейнерах в версии Proxmox VE 4.1 вы 
   можете ознакомиться в нашем переводе <a class="link" href="http://onreader.mdl.ru/LearningProxmoxVE/content/Ch03.html" 
   target="_top">Изучение Proxmox VE</a></em></span>.}</p>
  </div>
   
  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="System_reqs"> </a>Системные требования</h3>
   </div></div></div>
   <p>Proxmox VE 4.0 или выше.</p>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Features"> </a>Функциональность</h3>
   </div></div></div>
  	<div class="itemizedlist">
	<ul class="itemizedlist" type="disc">
	 <li class="listitem">
	 <p>Поддержка локальных каталогов (<span class="term"><strong class="userinput"><code>ЗАМЕЧАНИЕ: не для ZFS, используйте взамен ZFSPoolPlugin</code></strong></span>),
	 NFS, ZFS, LVM, Ceph и DRBD9 (прочие будут/могут появляться)</p>
	 </li>
	 <li class="listitem">
	 <p>Манипулирует размером диска</p>
	 </li>
	 <li class="listitem">
	 <p>Снимки, откаты, клонирование, связанное клонирование (все эти функции требуют поддержки хранилищем) </p>
	 </li>
	 <li class="listitem">
	 <p>Пространства имен ядра (ipc, uts, mount, pid, network и user) </p>
	 </li>
	 <li class="listitem">
	 <p>Профили Apparmor</p>
	 </li>
	 <li class="listitem">
	 <p>Политики Seccomp</p>
	 </li>
	 <li class="listitem">
	 <p>Chroots (с применением pivot_root) </p>
	 </li>
	 <li class="listitem">
	 <p>Возможности ядра</p>
	 </li>
	 <li class="listitem">
	 <p>CGroups (управляющие группы) </p>
	 </li>
	 <li class="listitem">
	 <p>Миграция</p>
	 </li>
	 <li class="listitem">
	 <p>Резервирование и восстановление</p>
	 </li>
	 <li class="listitem">
	 <p>Интегрированный межсетевой экран</p>
	 </li>
	 <li class="listitem">
	 <p>Сетевая поддержка VLAN, IPv4, IPv6</p>
	 </li>
   </ul>
   </div>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Supported_OS"> </a>Поддерживаемые операционные системы</h3>
   </div></div></div>
  	<div class="itemizedlist">
	<ul class="itemizedlist" type="disc">
	 <li class="listitem">
	 <p>Debian 6, 7, 8</p>
	 </li>
	 <li class="listitem">
	 <p>CentOS 6</p>
	 </li>
	 <li class="listitem">
	 <p>Ubuntu 12.04, 14.04, 15.04</p>
	 </li>
	 <li class="listitem">
	 <p>Archlinux</p>
	 </li>
   </ul>
   </div>
   <p>Другие операционные системы следуют пошагово.</p>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Manage_containers"> </a>Управление контейнерами</h3>
   </div></div></div>
   <p>Управление может осуществляться либо через графический интерфейс веб, либо при помощи инструментов командной строки.</p>
     <div xmlns="" class="titlepage"><div><div>
      <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Get_template"> </a>Получение шаблона контейнера</h4>
     </div></div></div>
     <p>Все шаблоны могут быть загружены через графический интерфейс.</p>
     <p><span class="term"><strong class="userinput"><code>ЗАМЕЧАНИЕ: работают только поддерживаемые ОС</code></strong></span>.</p>
     <p>Если ваши контейнеры еще пока не видны воспользуйтесь следующей командой <span class="term"><code>pve</code></span> для обновления списка:</p>
	   <pre class="screen">
pveam update
      </pre>
      <div class="informalfigure"><div class="mediaobject">
        <img src="figures/DownloadContainer.jpg"/> </div><br />
      </div>
	  
     <div xmlns="" class="titlepage"><div><div>
      <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Create"> </a>Создание контейнера</h4>
     </div></div></div>
     <p>После того, как вы загрузили шаблон, вы можете создать на его основе контейнер.</p>
     <p>Мастер графического интерфейса будет руководить вами в процессе создания контейнера.</p>
     <p>Также контейнер можно создать при помощи инструмента командной строки <span class="term"><code>pct</code></span>. Для 
	 получения подробностей обратитесь к <span class="term"><code>manpages</code></span></p>
	   <pre class="screen">
pct create 104 /var/lib/vz/template/cache/debian-8.0-standard_8.0-1_amd64.tar.gz \
 -description LXC -rootfs 4 -hostname pvecontainer01 -memory 1024 -nameserver 8.8.8.8 \
 -net0 name=eth0,hwaddr=52:4A:5E:26:58:D8,ip=192.168.15.147/24,gw=192.168.15.1,bridge=vmbr0 \
 -storage local -password changeme
      </pre>	  
      <div class="informalfigure"><div class="mediaobject">
        <img src="figures/Create_CT.jpg"/> </div><br />
      </div>

     <div xmlns="" class="titlepage"><div><div>
      <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Start"> </a>Запуск контейнера</h4>
     </div></div></div>
     <p>Существует два варианта запуска контейнера:</p>
     <p>либо через графический интерфейс, либо в командной строке</p>
	   <pre class="screen">
pct start 100
      </pre>
      <div class="informalfigure"><div class="mediaobject">
        <img src="figures/Start_CT.jpg"/> </div><br />
      </div>

     <div xmlns="" class="titlepage"><div><div>
      <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Stop"> </a>Останов контейнера</h4>
     </div></div></div>
     <p>Останов контейнера может быть выполнен путем, аналогичным его запуску:</p>
	   <pre class="screen">
pct stop 100
      </pre>
      <div class="informalfigure"><div class="mediaobject">
        <img src="figures/Stop_CT.jpg"/> </div><br />
      </div>

     <div xmlns="" class="titlepage"><div><div>
      <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Backup"> </a>Резервное копирование контейнера</h4>
     </div></div></div>
     <p>Резервная копия может быть сделана в трех различных режимах: снимок, приостановка и полный останов. Эти режимы опций имеют 
	 эффект, только если контейнер работает.</p>
     <p>Режим снимка (Snapshot): эта функция зависит от файловой системы и поэтому она должна поддерживать снимки. Если выбирается режим 
	 снимка, но он не поддерживается файловой системой резервное копирование будет выполнено в режиме приостановки.</p>
     <p>Режим приостановки (Suspend): контейнер будут заморожен на время работы резервного копирования. 
	 <span class="term"><strong class="userinput"><code>ЗАМЕЧАНИЕ: контейнер не работает пока выполняется резервное 
	 копирование!</code></strong></span>.</p>
     <p>Режим остановки (Stopped): контейнер будет выключен и перезапущен после резервного копирования.</p>
     <p>Инструментом резервного копирования командной строки контейнеров Linux является <span class="term"><code>vzdump</code></span>. 
	 Для получения более подробной информации читайте <span class="term"><code>manpage</code></span> <span class="term"><code>vzdump</code></span>.</p>
	   <pre class="screen">
vzdump 100 -compress lzo -dumpdir /var/lib/vz/dump/ -mode snapshot -remove 0
      </pre>
      <div class="informalfigure"><div class="mediaobject">
        <img src="figures/Backup_CT.jpg"/> </div><br />
      </div>

	  <div xmlns="" class="titlepage"><div><div>
      <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Restore"> </a>Восстановление контейнера</h4>
     </div></div></div>
     <p>Восстановление контейнера простое и быстрое.</p>
     <p>В графическом интерфейсе возможно восстановление контейнера только с тем же VMID и если нет виртуальной машины с таким VMID.</p>
     <p>Если вам нужно изменить VMID или переписать виртуальную машину, вы можете воспользоваться инструментом командной строки
	 <span class="term"><code>pct</code></span>. Для получения более подробной информации читайте 
	 <span class="term"><code>manpage</code></span> <span class="term"><code>vzdump</code></span>.</p>
	   <pre class="screen">
pct restore 101 /var/lib/vz/dump/vzdump-lxc-100-2015_06_22-11_12_40.tar.lzo
      </pre>
      <div class="informalfigure"><div class="mediaobject">
        <img src="figures/Restore_CT.jpg"/> </div><br />
      </div>

  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Migrate"> </a>Перенос контейнера с OpenVZ на LXC</h3>
   </div></div></div>
   <p>Следуйте за данной ссылкой: <a class="link" href="http://pve.proxmox.com/wiki/Convert_OpenVZ_to_LXC" target	="_top">Convert OpenVZ to LXC</a>.
   {<span class="emphasis"><em>Прим. пер.: см. также перевод <a class="link" href="http://onreader.mdl.ru/ProxmoxCookbook/content/Convert_OpenVZ_to_LXC.html" 
   target	="_top">Преобразование OpenVZ в LXC</a></em></span>}.</p>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="References"> </a>Ссылки</h3>
   </div></div></div>
   <p><a class="link" href="https://en.wikipedia.org/wiki/LXC" target="_top">Wikipedia Linux Container</a>.</p>
   <p><a class="link" href="https://linuxcontainers.org/" target="_top">Linux Container</a>.</p>
   <p><a class="link" href="https://github.com/lxc" target="_top">GIT Linux Container</a>.</p>
  </div>

</div>

<!----><script type="text/javascript" src="FooterAndSidebar.js">
</script><script type="text/javascript"><!--</div id="content"> is inside next code
document.write(FooterAndSidebar);//-->
</script>

</body></html>